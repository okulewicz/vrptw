\hypertarget{_v_r_p_fixer_8cs_source}{}\doxysection{VRPFixer.\+cs}
\label{_v_r_p_fixer_8cs_source}\index{VRPFixer.cs@{VRPFixer.cs}}
\mbox{\hyperlink{_v_r_p_fixer_8cs}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00001}00001 \textcolor{keyword}{using} \mbox{\hyperlink{namespace_common_g_i_s}{CommonGIS}};}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00002}00002 \textcolor{keyword}{using} System;}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00003}00003 \textcolor{keyword}{using} System.Collections.Generic;}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00004}00004 \textcolor{keyword}{using} System.Linq;}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00005}00005 \textcolor{keyword}{using} System.Text;}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00006}00006 \textcolor{keyword}{using} System.Threading.Tasks;}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00007}00007 \textcolor{keyword}{using} \mbox{\hyperlink{namespace_v_r_p_t_w_optimizer}{VRPTWOptimizer}}.\mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_interfaces}{Interfaces}};}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00008}00008 \textcolor{keyword}{using} \mbox{\hyperlink{namespace_v_r_p_t_w_optimizer}{VRPTWOptimizer}}.\mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_utils}{Utils}}.\mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_utils_1_1_model}{Model}};}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00009}00009 }
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00010}00010 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_utils_1_1_validation}{VRPTWOptimizer.Utils.Validation}}}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00011}00011 \{}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00012}\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_1_1_v_r_p_fixer}{00012}}     \textcolor{keyword}{public} \textcolor{keyword}{class }\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_1_1_v_r_p_fixer}{VRPFixer}}}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00013}00013     \{}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00014}\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_1_1_v_r_p_fixer_a652f2babfc11fba7103a426d5cd39cf9}{00014}}         \textcolor{keyword}{public} \textcolor{keyword}{static} \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_1_1_v_r_p_fixer_a652f2babfc11fba7103a426d5cd39cf9}{FixMissingVehicles}}(\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_model_1_1_v_r_p_definition_j_s_o_n_d_t_o}{VRPDefinitionJSONDTO}} dto, \textcolor{keywordtype}{bool} isFixed, List<Vehicle> vehicles, List<ValidationError> errors)}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00015}00015         \{}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00016}00016             \textcolor{keywordflow}{foreach} (var error \textcolor{keywordflow}{in} errors.Where(e => (e.ErrorCode == \mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_aa8aa68a7a6cfb16828910645145f31d5}{ErrorCode}}.TractorMissing || e.ErrorCode == \mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_aa8aa68a7a6cfb16828910645145f31d5}{ErrorCode}}.CapacityVehicleMissing) \&\& e.ObjectType == \mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_aae1d999843ee79c6abaea9828f4ec80c}{VRPObjectType}}.TransportDTO))}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00017}00017             \{}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00018}00018                 isFixed = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00019}00019                 var transportDTO = (error.ConsideredObject as \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_model_1_1_transport}{Transport}});}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00020}00020                 \textcolor{keywordflow}{if} (error.ErrorCode == \mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_aa8aa68a7a6cfb16828910645145f31d5}{ErrorCode}}.TractorMissing)}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00021}00021                 \{}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00022}00022                     \textcolor{keywordflow}{if} (!dto.Vehicles.Any(v => v.Id == transportDTO.TractorId \&\& v.Type == \mbox{\hyperlink{namespace_common_g_i_s}{CommonGIS}}.\mbox{\hyperlink{namespace_common_g_i_s_1_1_enums}{Enums}}.VehicleType.Tractor))}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00023}00023                     \{}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00024}00024                         \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle}{Vehicle}} templateTractor = vehicles.First(v => v.Type == \mbox{\hyperlink{namespace_common_g_i_s}{CommonGIS}}.\mbox{\hyperlink{namespace_common_g_i_s_1_1_enums}{Enums}}.VehicleType.Tractor);}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00025}00025                         \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_model_1_1_vehicle_d_t_o}{VehicleDTO}} newTractor = \textcolor{keyword}{new} \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_model_1_1_vehicle_d_t_o}{VehicleDTO}}(transportDTO.TractorId, \textcolor{keyword}{new} \textcolor{keywordtype}{double}[templateTractor.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_a5820fd9c92393d34f6282576c3a50004}{Capacity}}.Length],}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00026}00026                             \textcolor{keyword}{new} \textcolor{keywordtype}{int}[templateTractor.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_ac96913bec2ec72dd651b1298f47cbe51}{SpecialProperties}}.Length], \textcolor{keyword}{new} \mbox{\hyperlink{namespace_v_r_p_t_w_optimizer}{VRPTWOptimizer}}.\mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_enums}{Enums}}.Aggregation[templateTractor.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_a109f369de809fef5a4a1f92d98bd6156}{CapacityAggregationType}}.Length],}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00027}00027                             templateTractor.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_adf56c2c70b343141ccd8f8721e74bf3c}{InitialLocation}} as \mbox{\hyperlink{namespace_common_g_i_s}{CommonGIS}}.\mbox{\hyperlink{class_common_g_i_s_1_1_base_location}{BaseLocation}}, templateTractor.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_resource_a39dda7959ecbdd196cf88228cc34566c}{AvailabilityStart}},}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00028}00028                             templateTractor.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_aea13b7c7e39530026df3dec330e89fef}{FinalLocation}} as \mbox{\hyperlink{namespace_common_g_i_s}{CommonGIS}}.\mbox{\hyperlink{class_common_g_i_s_1_1_base_location}{BaseLocation}}, templateTractor.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_resource_a1f17ea00a4626b24cfd802f5c10db744}{AvailabilityEnd}},}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00029}00029                             templateTractor.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_aab2881047d0af67d65a7ca7240bbf6df}{MaxRideTime}}, templateTractor.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_aa3387b7a33667f5cf2cbe7a0eedb36f1}{RoadProperties}}, \mbox{\hyperlink{namespace_common_g_i_s}{CommonGIS}}.\mbox{\hyperlink{namespace_common_g_i_s_1_1_enums}{Enums}}.VehicleType.Tractor,}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00030}00030                             templateTractor.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_a06905509ca86e5d69ce145b1277de2c9}{VehicleCostPerDistanceUnit}}, templateTractor.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_a10e1e1f3a39a1694c0a25ced462261f5}{VehicleCostPerTimeUnit}}, templateTractor.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_a012c4cf8c35f047cf8ccdfbd634b0edc}{VehicleCostPerUsage}},}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00031}00031                             templateTractor.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_a4c7a672437bddc319cb62e790b988245}{OwnerID}}, templateTractor.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_a1ee01b6b70ab086160651f5a84dc7a58}{VehicleFlatCostForShortRouteLength}}, templateTractor.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_aa65292dcd7df7d934e7775bc520b34ff}{VehicleMaxRouteLengthForFlatCost}});}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00032}00032                         Array.Copy(templateTractor.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_ac96913bec2ec72dd651b1298f47cbe51}{SpecialProperties}}, newTractor.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_ac96913bec2ec72dd651b1298f47cbe51}{SpecialProperties}}, newTractor.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_ac96913bec2ec72dd651b1298f47cbe51}{SpecialProperties}}.Length);}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00033}00033                         Array.Copy(templateTractor.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_a109f369de809fef5a4a1f92d98bd6156}{CapacityAggregationType}}, newTractor.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_a109f369de809fef5a4a1f92d98bd6156}{CapacityAggregationType}}, newTractor.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_a109f369de809fef5a4a1f92d98bd6156}{CapacityAggregationType}}.Length);}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00034}00034                         Array.Copy(templateTractor.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_a5820fd9c92393d34f6282576c3a50004}{Capacity}}, newTractor.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_a5820fd9c92393d34f6282576c3a50004}{Capacity}}, newTractor.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_a5820fd9c92393d34f6282576c3a50004}{Capacity}}.Length);}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00035}00035                         dto.Vehicles.Add(newTractor);}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00036}00036                     \}}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00037}00037                 \}}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00038}00038                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (error.ErrorCode == \mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_aa8aa68a7a6cfb16828910645145f31d5}{ErrorCode}}.CapacityVehicleMissing)}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00039}00039                 \{}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00040}00040                     \textcolor{keywordflow}{if} (!dto.Vehicles.Any(v => v.Id == transportDTO.TrailerTruckId \&\& v.Type != \mbox{\hyperlink{namespace_common_g_i_s}{CommonGIS}}.\mbox{\hyperlink{namespace_common_g_i_s_1_1_enums}{Enums}}.VehicleType.Tractor))}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00041}00041                     \{}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00042}00042                         \textcolor{keywordtype}{bool} isTrailer = transportDTO.TractorId != -\/1 \&\& transportDTO.TractorId != 0;}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00043}00043                         \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle}{Vehicle}} templateVehicle = vehicles.First(v => v.Type != \mbox{\hyperlink{namespace_common_g_i_s}{CommonGIS}}.\mbox{\hyperlink{namespace_common_g_i_s_1_1_enums}{Enums}}.VehicleType.Tractor);}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00044}00044                         List<\mbox{\hyperlink{namespace_v_r_p_t_w_optimizer}{VRPTWOptimizer}}.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_transport_request}{TransportRequest}}> currentStack = \textcolor{keyword}{new}();}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00045}00045                         \textcolor{keywordtype}{int} epCount = \mbox{\hyperlink{class_common_g_i_s_1_1_vehicle_road_restriction_properties}{VehicleRoadRestrictionProperties}}.\mbox{\hyperlink{class_common_g_i_s_1_1_vehicle_road_restriction_properties_a50adc8bff31e280f979c182753b1897a}{MaxEPCount}};}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00046}00046                         \textcolor{keywordtype}{double}[] maxCapacity = \textcolor{keyword}{new} \textcolor{keywordtype}{double}[templateVehicle.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_a5820fd9c92393d34f6282576c3a50004}{Capacity}}.Length];}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00047}00047                         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} iloc = 0; iloc < transportDTO.Schedule.Count; iloc++)}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00048}00048                         \{}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00049}00049                             currentStack.AddRange(transportDTO.Schedule[iloc].LoadedRequestsIds.Select(\textcolor{keywordtype}{id} => dto.Requests.First(rq => rq.Id == \textcolor{keywordtype}{id}) as \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_transport_request}{TransportRequest}}));}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00050}00050                             transportDTO.Schedule[iloc].UnloadedRequestsIds.ForEach(\textcolor{keywordtype}{id} => \{ currentStack.RemoveAll(rq => rq.Id == \textcolor{keywordtype}{id}); \});}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00051}00051                             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < maxCapacity.Length; i++)}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00052}00052                             \{}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00053}00053                                 maxCapacity[i] = Math.Max(maxCapacity[i], currentStack.Sum(r => r.Size[i]));}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00054}00054                             \}}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00055}00055                             epCount = Math.Min(epCount, currentStack.Min(rq => rq.MaxVehicleSize.EpCount));}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00056}00056                         \}}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00057}00057                         \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_model_1_1_vehicle_d_t_o}{VehicleDTO}} newVehicle = \textcolor{keyword}{new} \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_model_1_1_vehicle_d_t_o}{VehicleDTO}}(transportDTO.TrailerTruckId, \textcolor{keyword}{new} \textcolor{keywordtype}{double}[templateVehicle.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_a5820fd9c92393d34f6282576c3a50004}{Capacity}}.Length],}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00058}00058                             \textcolor{keyword}{new} \textcolor{keywordtype}{int}[templateVehicle.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_a5820fd9c92393d34f6282576c3a50004}{Capacity}}.Length], \textcolor{keyword}{new} \mbox{\hyperlink{namespace_v_r_p_t_w_optimizer}{VRPTWOptimizer}}.\mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_enums}{Enums}}.Aggregation[templateVehicle.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_a109f369de809fef5a4a1f92d98bd6156}{CapacityAggregationType}}.Length],}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00059}00059                             templateVehicle.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_adf56c2c70b343141ccd8f8721e74bf3c}{InitialLocation}} as \mbox{\hyperlink{namespace_common_g_i_s}{CommonGIS}}.\mbox{\hyperlink{class_common_g_i_s_1_1_base_location}{BaseLocation}}, templateVehicle.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_resource_a39dda7959ecbdd196cf88228cc34566c}{AvailabilityStart}},}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00060}00060                             templateVehicle.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_aea13b7c7e39530026df3dec330e89fef}{FinalLocation}} as \mbox{\hyperlink{namespace_common_g_i_s}{CommonGIS}}.\mbox{\hyperlink{class_common_g_i_s_1_1_base_location}{BaseLocation}}, templateVehicle.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_resource_a1f17ea00a4626b24cfd802f5c10db744}{AvailabilityEnd}},}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00061}00061                             templateVehicle.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_aab2881047d0af67d65a7ca7240bbf6df}{MaxRideTime}}, \textcolor{keyword}{new} \mbox{\hyperlink{class_common_g_i_s_1_1_vehicle_road_restriction_properties}{VehicleRoadRestrictionProperties}}(\mbox{\hyperlink{class_common_g_i_s_1_1_vehicle_road_restriction_properties}{VehicleRoadRestrictionProperties}}.\mbox{\hyperlink{class_common_g_i_s_1_1_vehicle_road_restriction_properties_a39050bdb51269a4ca5897e8e0bfd8dae}{MaxGrossVehicleWeight}}, \mbox{\hyperlink{class_common_g_i_s_1_1_vehicle_road_restriction_properties}{VehicleRoadRestrictionProperties}}.\mbox{\hyperlink{class_common_g_i_s_1_1_vehicle_road_restriction_properties_a5f80468b3a0c75749f5e852e307ad6eb}{MaxHeight}},}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00062}00062                             \mbox{\hyperlink{class_common_g_i_s_1_1_vehicle_road_restriction_properties}{VehicleRoadRestrictionProperties}}.\mbox{\hyperlink{class_common_g_i_s_1_1_vehicle_road_restriction_properties_ab9ed1fef8b170b8a02d5fd2ba734e9ab}{MaxWidth}}, epCount, isTrailer ? \mbox{\hyperlink{namespace_common_g_i_s}{CommonGIS}}.\mbox{\hyperlink{namespace_common_g_i_s_1_1_enums}{Enums}}.VehicleTypeRouting.TractorWithTrailer : \mbox{\hyperlink{namespace_common_g_i_s}{CommonGIS}}.\mbox{\hyperlink{namespace_common_g_i_s_1_1_enums}{Enums}}.VehicleTypeRouting.StraightTruck),}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00063}00063                             isTrailer ? \mbox{\hyperlink{namespace_common_g_i_s}{CommonGIS}}.\mbox{\hyperlink{namespace_common_g_i_s_1_1_enums}{Enums}}.VehicleType.SemiTrailer : \mbox{\hyperlink{namespace_common_g_i_s}{CommonGIS}}.\mbox{\hyperlink{namespace_common_g_i_s_1_1_enums}{Enums}}.VehicleType.StraightTruck,}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00064}00064                             templateVehicle.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_a06905509ca86e5d69ce145b1277de2c9}{VehicleCostPerDistanceUnit}}, templateVehicle.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_a10e1e1f3a39a1694c0a25ced462261f5}{VehicleCostPerTimeUnit}}, templateVehicle.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_a012c4cf8c35f047cf8ccdfbd634b0edc}{VehicleCostPerUsage}},}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00065}00065                             templateVehicle.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_a4c7a672437bddc319cb62e790b988245}{OwnerID}}, templateVehicle.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_a1ee01b6b70ab086160651f5a84dc7a58}{VehicleFlatCostForShortRouteLength}}, templateVehicle.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_aa65292dcd7df7d934e7775bc520b34ff}{VehicleMaxRouteLengthForFlatCost}});}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00066}00066                         Array.Copy(templateVehicle.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_ac96913bec2ec72dd651b1298f47cbe51}{SpecialProperties}}, newVehicle.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_ac96913bec2ec72dd651b1298f47cbe51}{SpecialProperties}}, newVehicle.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_ac96913bec2ec72dd651b1298f47cbe51}{SpecialProperties}}.Length);}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00067}00067                         Array.Copy(templateVehicle.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_a109f369de809fef5a4a1f92d98bd6156}{CapacityAggregationType}}, newVehicle.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_a109f369de809fef5a4a1f92d98bd6156}{CapacityAggregationType}}, newVehicle.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_a109f369de809fef5a4a1f92d98bd6156}{CapacityAggregationType}}.Length);}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00068}00068                         Array.Copy(maxCapacity, newVehicle.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_a5820fd9c92393d34f6282576c3a50004}{Capacity}}, newVehicle.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_a5820fd9c92393d34f6282576c3a50004}{Capacity}}.Length);}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00069}00069                         dto.Vehicles.Add(newVehicle);}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00070}00070                     \}}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00071}00071                 \}}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00072}00072             \}}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00073}00073 }
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00074}00074             \textcolor{keywordflow}{return} isFixed;}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00075}00075         \}}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00076}00076 }
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00077}\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_1_1_v_r_p_fixer_aed91f5c9c2c2f06dc59f2e059a3669dd}{00077}}         \textcolor{keyword}{public} \textcolor{keyword}{static} \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_1_1_v_r_p_fixer_aed91f5c9c2c2f06dc59f2e059a3669dd}{FixRequestLimits}}(\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_model_1_1_v_r_p_definition_j_s_o_n_d_t_o}{VRPDefinitionJSONDTO}} dto, \textcolor{keywordtype}{bool} isFixed, List<ValidationError> errors)}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00078}00078         \{}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00079}00079             \textcolor{keywordflow}{throw} \textcolor{keyword}{new} NotImplementedException();}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00080}00080         \}}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00081}00081 }
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00082}\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_1_1_v_r_p_fixer_ad6fb3e60269ecefcdaecc0e2667314a4}{00082}}         \textcolor{keyword}{public} \textcolor{keyword}{static} \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_1_1_v_r_p_fixer_ad6fb3e60269ecefcdaecc0e2667314a4}{FixRequestSize}}(\textcolor{keywordtype}{bool} isFixed, List<ValidationError> errors)}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00083}00083         \{}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00084}00084             \textcolor{keywordflow}{foreach} (var error \textcolor{keywordflow}{in} errors.Where(e => e.ErrorCode == \mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_aa8aa68a7a6cfb16828910645145f31d5}{ErrorCode}}.ExceededCapacity \&\& e.ObjectType == \mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_aae1d999843ee79c6abaea9828f4ec80c}{VRPObjectType}}.Route))}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00085}00085             \{}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00086}00086                 isFixed = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00087}00087                 Dictionary<TransportRequest, double[]> capacityToBeSubtracted = \textcolor{keyword}{new}();}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00088}00088                 var route = (error.ConsideredObject as \mbox{\hyperlink{interface_v_r_p_t_w_optimizer_1_1_interfaces_1_1_i_route}{IRoute}});}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00089}00089                 List<\mbox{\hyperlink{namespace_v_r_p_t_w_optimizer}{VRPTWOptimizer}}.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_transport_request}{TransportRequest}}> currentStack = \textcolor{keyword}{new}();}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00090}00090                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} iloc = 0; iloc < route.VisitedLocations.Count; iloc++)}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00091}00091                 \{}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00092}00092                     route.UnloadedRequests[iloc].ForEach(rq => \{ currentStack.Remove(rq); \});}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00093}00093                     currentStack.AddRange(route.LoadedRequests[iloc]);}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00094}00094                     \textcolor{keywordflow}{foreach} (var loadedRequest \textcolor{keywordflow}{in} route.LoadedRequests[iloc])}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00095}00095                     \{}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00096}00096                         capacityToBeSubtracted.Add(loadedRequest, \textcolor{keyword}{new} \textcolor{keywordtype}{double}[route.Vehicle.Capacity.Length]);}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00097}00097                     \}}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00098}00098                     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < route.Vehicle.Capacity.Length; i++)}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00099}00099                     \{}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00100}00100                         \textcolor{keywordtype}{double} capacitySumDim = currentStack.Sum(rq => rq.Size[i]);}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00101}00101                         \textcolor{keywordtype}{int} currentStackSize = currentStack.Count;}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00102}00102                         \textcolor{keywordflow}{if} (capacitySumDim > route.Vehicle.Capacity[i])}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00103}00103                         \{}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00104}00104                             \textcolor{keywordtype}{double} overhead = capacitySumDim -\/ route.Vehicle.Capacity[i];}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00105}00105                             \textcolor{keywordflow}{foreach} (var stackRequest \textcolor{keywordflow}{in} currentStack)}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00106}00106                             \{}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00107}00107                                 capacityToBeSubtracted[stackRequest][i] = Math.Max(capacityToBeSubtracted[stackRequest][i], overhead * stackRequest.Size[i] / capacitySumDim);}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00108}00108                             \}}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00109}00109                         \}}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00110}00110                     \}}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00111}00111                 \}}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00112}00112                 \textcolor{keywordflow}{foreach} (var requestToBeSubtracted \textcolor{keywordflow}{in} capacityToBeSubtracted)}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00113}00113                 \{}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00114}00114                     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < requestToBeSubtracted.Value.Length; i++)}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00115}00115                     \{}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00116}00116                         \textcolor{keywordflow}{if} (requestToBeSubtracted.Value[i] > 0)}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00117}00117                         \{}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00118}00118                             requestToBeSubtracted.Key.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_transport_request_aabb57d387dd0e8424f079a9228ed5e29}{Size}}[i] -\/= requestToBeSubtracted.Value[i];}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00119}00119                             requestToBeSubtracted.Key.Size[i] = Math.Floor(requestToBeSubtracted.Key.Size[i] * 4.0) / 4.0;}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00120}00120                         \}}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00121}00121                     \}}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00122}00122                 \}}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00123}00123             \}}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00124}00124 }
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00125}00125             \textcolor{keywordflow}{return} isFixed;}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00126}00126         \}}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00127}00127 }
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00128}\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_1_1_v_r_p_fixer_a38fd265b3570c98f24e0738e57034cf6}{00128}}         \textcolor{keyword}{public} \textcolor{keyword}{static} \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_1_1_v_r_p_fixer_a38fd265b3570c98f24e0738e57034cf6}{FixRequestsProperties}}(\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_model_1_1_v_r_p_definition_j_s_o_n_d_t_o}{VRPDefinitionJSONDTO}} dto, \textcolor{keywordtype}{bool} isFixed, List<ValidationError> errors)}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00129}00129         \{}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00130}00130             \textcolor{keywordflow}{foreach} (var error \textcolor{keywordflow}{in} errors.Where(e => e.ErrorCode == \mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_aa8aa68a7a6cfb16828910645145f31d5}{ErrorCode}}.IdenticalDeliveryAndPickup \&\& e.ObjectType == \mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_aae1d999843ee79c6abaea9828f4ec80c}{VRPObjectType}}.TransportRequest))}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00131}00131             \{}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00132}00132                 isFixed = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00133}00133                 dto.Requests.RemoveAll(r => r.Id.ToString() == error.ObjectId);}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00134}00134             \}}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00135}00135             \textcolor{keywordflow}{foreach} (var error \textcolor{keywordflow}{in} errors.Where(e => e.ErrorCode == \mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_aa8aa68a7a6cfb16828910645145f31d5}{ErrorCode}}.ZeroPackages \&\& e.ObjectType == \mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_aae1d999843ee79c6abaea9828f4ec80c}{VRPObjectType}}.TransportRequest))}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00136}00136             \{}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00137}00137                 \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_transport_request}{TransportRequest}} zeroPackageRequest = (error.ConsideredObject as \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_transport_request}{TransportRequest}});}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00138}00138                 dto.Requests.RemoveAll(r => r.Id.ToString() == error.ObjectId);}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00139}00139                 dto.Requests.Add(}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00140}00140                 \textcolor{keyword}{new} \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_model_1_1_request_d_t_o}{RequestDTO}}(zeroPackageRequest.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_transport_request_a32189b723545475fbaef32200a3d4a47}{Id}}, zeroPackageRequest.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_transport_request_aabb57d387dd0e8424f079a9228ed5e29}{Size}}, zeroPackageRequest.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_transport_request_a3fee3d993c9dbaf0908742c16f789658}{NecessaryVehicleSpecialProperties}},}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00141}00141                     Math.Max((\textcolor{keywordtype}{int})Math.Ceiling(zeroPackageRequest.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_transport_request_aabb57d387dd0e8424f079a9228ed5e29}{Size}}.Min()), 1), zeroPackageRequest.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_transport_request_a3289479578b51949225c4c823d62b954}{PackageCountForImediateRetrieval}},}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00142}00142                     zeroPackageRequest.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_transport_request_a237c8c9bcfdd77c4e15948276abdb502}{PickupLocation}} as \mbox{\hyperlink{class_common_g_i_s_1_1_base_location}{BaseLocation}}, zeroPackageRequest.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_transport_request_a3eac1c563851c6d68887c2817912b039}{PickupAvailableTimeWindowStart}}, zeroPackageRequest.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_transport_request_a7f0799b141f71f459daf024c5d666f54}{PickupPreferedTimeWindowStart}},}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00143}00143                     zeroPackageRequest.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_transport_request_af3321390516fa33422232b3810ea184b}{PickupPreferedTimeWindowEnd}}, zeroPackageRequest.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_transport_request_a23eb10ec3f51685cde69ac3260193840}{PickupAvailableTimeWindowEnd}},}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00144}00144                     zeroPackageRequest.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_transport_request_a35f1e8d6b1620ccad38d00e015ebcf50}{DeliveryLocation}} as \mbox{\hyperlink{class_common_g_i_s_1_1_base_location}{BaseLocation}}, zeroPackageRequest.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_transport_request_a8a06d2f55129c63c267c84cad2e5672e}{DeliveryAvailableTimeWindowStart}}, zeroPackageRequest.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_transport_request_a1f8bfecdc5a92ecd1b83331d4f39dc81}{DeliveryPreferedTimeWindowStart}},}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00145}00145                     zeroPackageRequest.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_transport_request_a9584447b8565988ef50063687e098e41}{DeliveryPreferedTimeWindowEnd}}, zeroPackageRequest.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_transport_request_a5d26071503ce56dd916b104177a7609f}{DeliveryAvailableTimeWindowEnd}}, zeroPackageRequest.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_transport_request_ab16589c2cb1153d708ae7006a1424127}{Type}},}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00146}00146                     zeroPackageRequest.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_transport_request_a5c725eede72d88fbd116cf098452552f}{CargoTypes}}, zeroPackageRequest.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_transport_request_ac6a087105ba0cdde12894eedc7e39ea0}{MaxVehicleSize}}, zeroPackageRequest.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_transport_request_a577b69e6de2c28ad2327f268d78a5ce5}{RestrictedCargoTypes}}, zeroPackageRequest.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_transport_request_a56f40646a4e52ff215aa115ef7349eed}{MutuallyExclusiveRequestsIdTimeBufferDict}},}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00147}00147                     zeroPackageRequest.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_transport_request_a608a98fd3db46f3e9ca16e8e6bb76bcc}{RevenueValue}}, zeroPackageRequest.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_transport_request_a6c98b3db35b881fc1c16da6e9f487d59}{Name}})}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00148}00148                 );}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00149}00149             \}}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00150}00150             \textcolor{keywordflow}{return} isFixed;}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00151}00151         \}}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00152}00152 }
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00153}\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_1_1_v_r_p_fixer_aa1aecaf09972d995de051d3ba99d4d9f}{00153}}         \textcolor{keyword}{public} \textcolor{keyword}{static} \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_1_1_v_r_p_fixer_aa1aecaf09972d995de051d3ba99d4d9f}{FixVehicleSize}}(\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_model_1_1_v_r_p_definition_j_s_o_n_d_t_o}{VRPDefinitionJSONDTO}} dto, \textcolor{keywordtype}{bool} isFixed, List<Vehicle> vehicles, List<ValidationError> errors)}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00154}00154         \{}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00155}00155             \textcolor{keywordflow}{foreach} (var error \textcolor{keywordflow}{in} errors.Where(e => e.ErrorCode == \mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_aa8aa68a7a6cfb16828910645145f31d5}{ErrorCode}}.TooLargeVehicleSize \&\& e.ObjectType == \mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_aae1d999843ee79c6abaea9828f4ec80c}{VRPObjectType}}.Vehicle))}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00156}00156             \{}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00157}00157                 \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle}{Vehicle}} vehicleToFix = error.ConsideredObject as \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle}{Vehicle}};}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00158}00158                 \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_model_1_1_vehicle_d_t_o}{VehicleDTO}} newVehicle = \textcolor{keyword}{new} \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_model_1_1_vehicle_d_t_o}{VehicleDTO}}(}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00159}00159                     vehicleToFix.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_resource_aacbb2ecbfc2ba0fa846364627af5a195}{Id}}, vehicleToFix.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_a5820fd9c92393d34f6282576c3a50004}{Capacity}}, vehicleToFix.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_ac96913bec2ec72dd651b1298f47cbe51}{SpecialProperties}},}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00160}00160                     vehicleToFix.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_a109f369de809fef5a4a1f92d98bd6156}{CapacityAggregationType}}, \textcolor{keyword}{new} \mbox{\hyperlink{class_common_g_i_s_1_1_base_location}{BaseLocation}}(vehicleToFix.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_adf56c2c70b343141ccd8f8721e74bf3c}{InitialLocation}}), vehicleToFix.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_resource_a39dda7959ecbdd196cf88228cc34566c}{AvailabilityStart}},}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00161}00161                     \textcolor{keyword}{new} \mbox{\hyperlink{class_common_g_i_s_1_1_base_location}{BaseLocation}}(vehicleToFix.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_aea13b7c7e39530026df3dec330e89fef}{FinalLocation}}), vehicleToFix.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_resource_a1f17ea00a4626b24cfd802f5c10db744}{AvailabilityEnd}}, vehicleToFix.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_aab2881047d0af67d65a7ca7240bbf6df}{MaxRideTime}},}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00162}00162                     \mbox{\hyperlink{class_common_g_i_s_1_1_vehicle_road_restriction_properties}{VehicleRoadRestrictionProperties}}.\mbox{\hyperlink{class_common_g_i_s_1_1_vehicle_road_restriction_properties_a3053a33593350daeca5371e38a5c3a27}{BoundProperties}}(vehicleToFix.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_aa3387b7a33667f5cf2cbe7a0eedb36f1}{RoadProperties}}), vehicleToFix.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_a8604c43ba04dafeb3e6e9cf370e86c06}{Type}}, vehicleToFix.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_a06905509ca86e5d69ce145b1277de2c9}{VehicleCostPerDistanceUnit}}, vehicleToFix.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_a10e1e1f3a39a1694c0a25ced462261f5}{VehicleCostPerTimeUnit}},}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00163}00163                     vehicleToFix.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_a012c4cf8c35f047cf8ccdfbd634b0edc}{VehicleCostPerUsage}}, vehicleToFix.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_a4c7a672437bddc319cb62e790b988245}{OwnerID}}, vehicleToFix.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_a1ee01b6b70ab086160651f5a84dc7a58}{VehicleFlatCostForShortRouteLength}}, vehicleToFix.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle_aa65292dcd7df7d934e7775bc520b34ff}{VehicleMaxRouteLengthForFlatCost}});}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00164}00164                 isFixed = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00165}00165                 vehicles.RemoveAll(v => v.Id == newVehicle.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_resource_aacbb2ecbfc2ba0fa846364627af5a195}{Id}});}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00166}00166                 vehicles.Add(newVehicle);}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00167}00167             \}}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00168}00168             \textcolor{keywordflow}{return} isFixed;}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00169}00169         \}}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00170}00170 }
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00171}\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_1_1_v_r_p_fixer_a7c0b9290b5942b515d1dc0bb31147c90}{00171}}         \textcolor{keyword}{public} \textcolor{keyword}{static} \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_1_1_v_r_p_fixer_a7c0b9290b5942b515d1dc0bb31147c90}{FixWrongVehicleType}}(\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_model_1_1_v_r_p_definition_j_s_o_n_d_t_o}{VRPDefinitionJSONDTO}} dto, \textcolor{keywordtype}{bool} isFixed, List<ValidationError> errors)}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00172}00172         \{}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00173}00173             \textcolor{keywordflow}{foreach} (var error \textcolor{keywordflow}{in} errors.Where(e => e.ErrorCode == \mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_aa8aa68a7a6cfb16828910645145f31d5}{ErrorCode}}.TractorAssignedAsCapacityVehicle \&\& e.ObjectType == \mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_aae1d999843ee79c6abaea9828f4ec80c}{VRPObjectType}}.Route))}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00174}00174             \{}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00175}00175                 isFixed = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00176}00176                 var route = (error.ConsideredObject as \mbox{\hyperlink{interface_v_r_p_t_w_optimizer_1_1_interfaces_1_1_i_route}{IRoute}});}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00177}00177                 var routeVehicle = dto.Vehicles.First(v => v.Id == route.Vehicle.Id);}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00178}00178                 routeVehicle.SetType(\mbox{\hyperlink{namespace_common_g_i_s}{CommonGIS}}.\mbox{\hyperlink{namespace_common_g_i_s_1_1_enums}{Enums}}.VehicleType.StraightTruck);}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00179}00179                 List<\mbox{\hyperlink{namespace_v_r_p_t_w_optimizer}{VRPTWOptimizer}}.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_transport_request}{TransportRequest}}> currentStack = \textcolor{keyword}{new}();}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00180}00180                 \textcolor{keywordtype}{double}[] maxCapacity = \textcolor{keyword}{new} \textcolor{keywordtype}{double}[route.Vehicle.Capacity.Length];}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00181}00181                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} iloc = 0; iloc < route.VisitedLocations.Count; iloc++)}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00182}00182                 \{}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00183}00183                     route.UnloadedRequests[iloc].ForEach(rq => \{ currentStack.Remove(rq); \});}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00184}00184                     currentStack.AddRange(route.LoadedRequests[iloc]);}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00185}00185                     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < maxCapacity.Length; i++)}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00186}00186                     \{}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00187}00187                         maxCapacity[i] = Math.Max(maxCapacity[i], currentStack.Sum(r => r.Size[i]));}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00188}00188                         routeVehicle.Capacity[i] = maxCapacity[i];}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00189}00189                     \}}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00190}00190                 \}}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00191}00191             \}}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00192}00192             \textcolor{keywordflow}{return} isFixed;}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00193}00193         \}}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00194}00194 }
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00195}\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_1_1_v_r_p_fixer_a3033a1900746ef89d3c41b85406c4e0b}{00195}}         \textcolor{keyword}{public} \textcolor{keyword}{static} \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_1_1_v_r_p_fixer_a3033a1900746ef89d3c41b85406c4e0b}{RemoveTransfersAndLoops}}(\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_model_1_1_v_r_p_definition_j_s_o_n_d_t_o}{VRPDefinitionJSONDTO}} dto, \textcolor{keywordtype}{bool} isFixed)}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00196}00196         \{}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00197}00197             \textcolor{keywordflow}{if} (dto.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_model_1_1_v_r_p_definition_j_s_o_n_d_t_o_ac570f91f51934af44cb2750afbae6bd1}{Requests}}.RemoveAll(r => r.DeliveryLocation.Id == r.PickupLocation.Id) > 0)}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00198}00198             \{}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00199}00199                 \textcolor{comment}{//removing loops}}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00200}00200                 isFixed = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00201}00201             \}}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00202}00202             \textcolor{keywordflow}{if} (dto.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_model_1_1_v_r_p_definition_j_s_o_n_d_t_o_ac570f91f51934af44cb2750afbae6bd1}{Requests}}.RemoveAll(r => r.DeliveryLocation.Id != dto.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_model_1_1_v_r_p_definition_j_s_o_n_d_t_o_aac14a35ebf9b777736aca7b696b25a99}{DepotId}} \&\& r.PickupLocation.Id != dto.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_model_1_1_v_r_p_definition_j_s_o_n_d_t_o_aac14a35ebf9b777736aca7b696b25a99}{DepotId}}) > 0)}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00203}00203             \{}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00204}00204                 \textcolor{comment}{//removing transfers}}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00205}00205                 isFixed = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00206}00206             \}}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00207}00207             \textcolor{keywordflow}{return} isFixed;}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00208}00208         \}}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00209}00209 }
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00210}\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_1_1_v_r_p_fixer_a9ac17d13fb9a87ace0169fd932243b81}{00210}}         \textcolor{keyword}{public} \textcolor{keyword}{static} \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_1_1_v_r_p_fixer_a9ac17d13fb9a87ace0169fd932243b81}{TrimLeftInHistoric}}(\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_model_1_1_v_r_p_definition_j_s_o_n_d_t_o}{VRPDefinitionJSONDTO}} dto, \textcolor{keywordtype}{bool} isFixed)}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00211}00211         \{}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00212}00212             \textcolor{keywordflow}{if} (dto.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_model_1_1_v_r_p_definition_j_s_o_n_d_t_o_a14f58c6f8c844fadc134f7df6a344c90}{VIATMSSolution}} != \textcolor{keyword}{null} \&\& dto.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_model_1_1_v_r_p_definition_j_s_o_n_d_t_o_a14f58c6f8c844fadc134f7df6a344c90}{VIATMSSolution}}.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_model_1_1_v_i_a_t_m_s_solution_d_t_o_a9a24edcaa3734b9e9d2ef63f315ff439}{LeftRequestIds}} != \textcolor{keyword}{null})}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00213}00213             \{}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00214}00214                 \textcolor{keywordflow}{foreach} (var \textcolor{keywordtype}{id} \textcolor{keywordflow}{in} dto.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_model_1_1_v_r_p_definition_j_s_o_n_d_t_o_a14f58c6f8c844fadc134f7df6a344c90}{VIATMSSolution}}.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_model_1_1_v_i_a_t_m_s_solution_d_t_o_a9a24edcaa3734b9e9d2ef63f315ff439}{LeftRequestIds}})}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00215}00215                 \{}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00216}00216                     dto.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_model_1_1_v_r_p_definition_j_s_o_n_d_t_o_ac570f91f51934af44cb2750afbae6bd1}{Requests}}.RemoveAll(rq => rq.Id.ToString() == \textcolor{keywordtype}{id});}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00217}00217                     isFixed = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00218}00218                 \}}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00219}00219                 dto.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_model_1_1_v_r_p_definition_j_s_o_n_d_t_o_a14f58c6f8c844fadc134f7df6a344c90}{VIATMSSolution}}.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_utils_1_1_model_1_1_v_i_a_t_m_s_solution_d_t_o_a9a24edcaa3734b9e9d2ef63f315ff439}{LeftRequestIds}}.Clear();}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00220}00220             \}}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00221}00221             \textcolor{keywordflow}{return} isFixed;}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00222}00222         \}}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00223}00223     \}}
\DoxyCodeLine{\Hypertarget{_v_r_p_fixer_8cs_source_l00224}00224 \}}

\end{DoxyCode}
