\hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source}{}\doxysection{Distribution\+Clustering\+Integrated\+Fleet/\+Clusterizing\+VRPOptimizer.cs}
\label{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source}\index{ClusterizingVRPOptimizer.cs@{ClusterizingVRPOptimizer.cs}}
\mbox{\hyperlink{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00001}00001 \textcolor{keyword}{using} \mbox{\hyperlink{namespace_common_g_i_s}{CommonGIS}};}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00002}00002 \textcolor{keyword}{using} \mbox{\hyperlink{namespace_common_g_i_s}{CommonGIS}}.\mbox{\hyperlink{namespace_common_g_i_s_1_1_interfaces}{Interfaces}};}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00003}00003 \textcolor{keyword}{using} System;}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00004}00004 \textcolor{keyword}{using} System.Collections.Generic;}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00005}00005 \textcolor{keyword}{using} System.Diagnostics;}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00006}00006 \textcolor{keyword}{using} System.Linq;}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00007}00007 \textcolor{keyword}{using} \mbox{\hyperlink{namespace_v_r_p_t_w_optimizer}{VRPTWOptimizer}}.\mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_interfaces}{Interfaces}};}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00008}00008 }
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00009}\mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_cluster_1_1_distribution_clustering_integrated_fleet}{00009}} \textcolor{keyword}{namespace }\mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_cluster_1_1_distribution_clustering_integrated_fleet}{VRPTWOptimizer.BL.Meta.Cluster.DistributionClusteringIntegratedFleet}}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00010}00010 \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00011}\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_cluster_1_1_distribution_clustering_integrated_fldfd1ce4cb660c636c9c45e225caa8a15}{00011}}     \textcolor{keyword}{public} \textcolor{keyword}{class }\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_cluster_1_1_distribution_clustering_integrated_fldfd1ce4cb660c636c9c45e225caa8a15}{ClusterizingVRPOptimizer}} : \mbox{\hyperlink{interface_v_r_p_t_w_optimizer_1_1_interfaces_1_1_i_v_r_p_optimizer}{IVRPOptimizer}}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00012}00012     \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00013}00013         \textcolor{comment}{//HACK constant factor for balancing time and distance}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00014}00014         \textcolor{keyword}{private} \textcolor{keyword}{const} \textcolor{keywordtype}{int} SecondsToMetersFactor = 16;}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00015}00015         \textcolor{keyword}{private} readonly \textcolor{keywordtype}{double} MaxDelayWithinRoute;}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00016}00016         \textcolor{keyword}{private} readonly \textcolor{keywordtype}{double} MaxVehicleDelay;}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00017}00017         \textcolor{keyword}{private} readonly \textcolor{keywordtype}{int} randomSeed;}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00018}00018         \textcolor{keyword}{private} readonly Random rng;}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00019}\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_cluster_1_1_distribution_clustering_integrated_fldfd1ce4cb660c636c9c45e225caa8a15_a329a497262610e2cf8c85e5de7c21c16}{00019}}         \textcolor{keyword}{public} \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_cluster_1_1_distribution_clustering_integrated_fldfd1ce4cb660c636c9c45e225caa8a15_a329a497262610e2cf8c85e5de7c21c16}{RandomizeVehicleChoice}} \{ \textcolor{keyword}{get}; \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00020}00020 }
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00021}00021         \textcolor{keyword}{internal} \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_cluster_1_1_distribution_clustering_integrated_fldfd1ce4cb660c636c9c45e225caa8a15}{ClusterizingVRPOptimizer}}(\textcolor{keywordtype}{bool} randomizeVehicleChoice, \textcolor{keywordtype}{int} randomSeed, \textcolor{keywordtype}{double} maxDelayWithinRoute, \textcolor{keywordtype}{double} maxVehicleDelay)}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00022}00022         \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00023}00023             this.randomSeed = randomSeed;}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00024}00024             rng = \textcolor{keyword}{new} Random(randomSeed);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00025}00025             \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_cluster_1_1_distribution_clustering_integrated_fldfd1ce4cb660c636c9c45e225caa8a15_a329a497262610e2cf8c85e5de7c21c16}{RandomizeVehicleChoice}} = randomizeVehicleChoice;}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00026}00026             MaxDelayWithinRoute = maxDelayWithinRoute;}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00027}00027             MaxVehicleDelay = maxVehicleDelay;}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00028}00028         \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00029}00029 }
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00030}00030         \textcolor{keyword}{private} \textcolor{keyword}{static} \textcolor{keywordtype}{void} ExtendRoute(\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_generator}{RouteGenerator}} routeGenerator,}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00031}00031                                                 List<TransportRequest> unassignedRequests,}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00032}00032                                         List<Route> routes,}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00033}00033                                         Dictionary<TransportRequest, Route> requestsRoutesDictionary,}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00034}00034                                         \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route}{Route}} route,}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00035}00035                                         Dictionary<TransportRequest, int> requestsSet,}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00036}00036                                         SimpleVehicleSchedule vehicleSchedule,}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00037}00037                                         \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_transport_request}{TransportRequest}} addedRequest)}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00038}00038         \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00039}00039             List<TransportRequest> requestsSetKeys = requestsSet.Keys.ToList();}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00040}00040             var newRoute = routeGenerator.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_generator_a14d38c67d367b1e598d3b783ccee1218}{CreateRoute}}(route.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_a140570406d3a67e24ee5ad2ca5261abc}{Vehicle}}, route.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_af661214282b61c0cf856f8f979022f9b}{VehicleTractor}}, route.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_a3973b1a8b30be252b9dc3270bb1de11b}{VehicleDriver}});}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00041}00041             var success = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00042}00042             \textcolor{keywordflow}{foreach} (var transportRequest \textcolor{keywordflow}{in} requestsSetKeys)}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00043}00043             \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00044}00044                 \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_insertion_result}{InsertionResult}} insertionResult = newRoute.Insert(requestsSet[transportRequest], transportRequest);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00045}00045                 \textcolor{keywordflow}{if} (!insertionResult.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_insertion_result_a4eebd85d70ef6813d7a00f897b6a8e41}{Success}})}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00046}00046                 \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00047}00047                     success = \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00048}00048                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00049}00049                 \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00050}00050             \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00051}00051             \textcolor{keywordflow}{if} (success)}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00052}00052             \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00053}00053                 vehicleSchedule.Remove(route);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00054}00054                 \textcolor{keywordflow}{if} (!vehicleSchedule.RouteFitsIntoSchedule(newRoute))}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00055}00055                 \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00056}00056                     success = \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00057}00057                     vehicleSchedule.Add(route);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00058}00058                 \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00059}00059                 \textcolor{keywordflow}{if} (success)}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00060}00060                 \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00061}00061                     var sameVehicleRoutes = routes.Where(existingRoute => existingRoute.Vehicle.Id == newRoute.Vehicle.Id).ToList();}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00062}00062                     vehicleSchedule.Add(newRoute);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00063}00063                     routes.Remove(route);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00064}00064                     sameVehicleRoutes = routes.Where(existingRoute => existingRoute.Vehicle.Id == newRoute.Vehicle.Id).ToList();}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00065}00065                     Debug.Assert(!sameVehicleRoutes.Any(existingRoute => existingRoute.ArrivalTimes[0] < newRoute.DepartureTimes.Last() \&\& existingRoute.DepartureTimes.Last() > newRoute.ArrivalTimes[0]));}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00066}00066                     unassignedRequests.Remove(addedRequest);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00067}00067                     requestsRoutesDictionary.Add(addedRequest, newRoute);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00068}00068                     \textcolor{keywordflow}{foreach} (var transportRequest \textcolor{keywordflow}{in} requestsSetKeys)}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00069}00069                     \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00070}00070                         requestsRoutesDictionary[transportRequest] = newRoute;}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00071}00071                     \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00072}00072                     routes.Add(newRoute);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00073}00073                 \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00074}00074             \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00075}00075         \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00076}00076 }
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00077}00077         \textcolor{keyword}{private} \textcolor{keyword}{static} \textcolor{keywordtype}{int} FillInRequestsSetFromRoute(Route route1, Dictionary<TransportRequest, int> requestsSet, \textcolor{keywordtype}{int} offset)}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00078}00078         \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00079}00079             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 1; i < route1.VisitedLocations.Count -\/ 1; i++, offset++)}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00080}00080             \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00081}00081                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < route1.UnloadedRequests[i].Count; j++)}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00082}00082                 \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00083}00083                     requestsSet.Add(route1.UnloadedRequests[i][j], offset);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00084}00084                 \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00085}00085                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < route1.LoadedRequests[i].Count; j++)}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00086}00086                 \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00087}00087                     requestsSet.Add(route1.LoadedRequests[i][j], offset);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00088}00088                 \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00089}00089             \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00090}00090 }
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00091}00091             \textcolor{keywordflow}{return} offset;}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00092}00092         \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00093}00093 }
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00094}\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_cluster_1_1_distribution_clustering_integrated_fldfd1ce4cb660c636c9c45e225caa8a15_a44570b5e59504e1b85e2b914665baeb8}{00094}}         \textcolor{keyword}{public} \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_v_r_p_optimizer_result}{VRPOptimizerResult}} \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_cluster_1_1_distribution_clustering_integrated_fldfd1ce4cb660c636c9c45e225caa8a15_a44570b5e59504e1b85e2b914665baeb8}{Optimize}}(\mbox{\hyperlink{interface_v_r_p_t_w_optimizer_1_1_interfaces_1_1_i_v_r_p_provider}{IVRPProvider}} vrpProvider, \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_v_r_p_cost_function}{VRPCostFunction}} costFunctionFactors, \mbox{\hyperlink{interface_v_r_p_t_w_optimizer_1_1_interfaces_1_1_i_time_estimator}{ITimeEstimator}} timeEstimator, \mbox{\hyperlink{interface_common_g_i_s_1_1_interfaces_1_1_i_distance_provider}{IDistanceProvider}} distanceProvider)}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00095}00095         \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00096}00096             \textcolor{comment}{//TODO implement utilization of cost function within optimizer}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00097}00097             \textcolor{keywordflow}{return} \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_cluster_1_1_distribution_clustering_integrated_fldfd1ce4cb660c636c9c45e225caa8a15_a44570b5e59504e1b85e2b914665baeb8}{Optimize}}(vrpProvider, timeEstimator, distanceProvider);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00098}00098         \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00099}00099 }
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00100}\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_cluster_1_1_distribution_clustering_integrated_fldfd1ce4cb660c636c9c45e225caa8a15_a5639437cfc797c6635ea15488aef829d}{00100}}         \textcolor{keyword}{public} \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_v_r_p_optimizer_result}{VRPOptimizerResult}} \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_cluster_1_1_distribution_clustering_integrated_fldfd1ce4cb660c636c9c45e225caa8a15_a5639437cfc797c6635ea15488aef829d}{Optimize}}(\mbox{\hyperlink{interface_v_r_p_t_w_optimizer_1_1_interfaces_1_1_i_v_r_p_provider}{IVRPProvider}} vrpProvider, \mbox{\hyperlink{interface_v_r_p_t_w_optimizer_1_1_interfaces_1_1_i_time_estimator}{ITimeEstimator}} timeEstimator, \mbox{\hyperlink{interface_common_g_i_s_1_1_interfaces_1_1_i_distance_provider}{IDistanceProvider}} distanceProvider)}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00101}00101         \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00102}00102             \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_generator}{RouteGenerator}} routeGenerator = \textcolor{keyword}{new} \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_generator}{RouteGenerator}}(distanceProvider, timeEstimator);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00103}00103             List<TransportRequest> requests = vrpProvider.\mbox{\hyperlink{interface_v_r_p_t_w_optimizer_1_1_interfaces_1_1_i_v_r_p_provider_af8d49aa28e8758bf0aa710d8e295fdb2}{Requests}};}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00104}00104             List<Vehicle> vehicles = vrpProvider.\mbox{\hyperlink{interface_v_r_p_t_w_optimizer_1_1_interfaces_1_1_i_v_r_p_provider_a4199547318344b5c4f5cf5cfc2765fa1}{Vehicles}};}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00105}00105             \mbox{\hyperlink{class_common_g_i_s_1_1_location}{Location}} homeDepot = vrpProvider.\mbox{\hyperlink{interface_v_r_p_t_w_optimizer_1_1_interfaces_1_1_i_v_r_p_provider_a2d19009b7dd660f4e205890a57f81aed}{HomeDepot}};}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00106}00106             var orderedCapcitatedVehicles = vehicles}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00107}00107               .Where(vh => vh.Type != \mbox{\hyperlink{namespace_common_g_i_s}{CommonGIS}}.\mbox{\hyperlink{namespace_common_g_i_s_1_1_enums}{Enums}}.VehicleType.Tractor)}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00108}00108               .OrderBy(vh => vh.RoadProperties.GrossVehicleWeight);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00109}00109             var tractors = vehicles}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00110}00110                 .Where(vh => vh.Type == \mbox{\hyperlink{namespace_common_g_i_s}{CommonGIS}}.\mbox{\hyperlink{namespace_common_g_i_s_1_1_enums}{Enums}}.VehicleType.Tractor);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00111}00111             var maxVehicleRoadProperties = orderedCapcitatedVehicles.Last().RoadProperties;}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00112}00112             List<Edge> orderedEdges = \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_edge}{Edge}}.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_edge_a3a3e326dbee23be4c89da35ce402dc1c}{CreateEdgesBetweenDeliveryNodes}}(}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00113}00113                 requests,}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00114}00114                 vehicles,}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00115}00115                 distanceProvider,}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00116}00116                 timeEstimator,}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00117}00117                 maxVehicleRoadProperties,}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00118}00118                 MaxDelayWithinRoute,}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00119}00119                 \textcolor{keyword}{new} \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_v_r_p_cost_function}{VRPCostFunction}}()}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00120}00120                 \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00121}00121                     DriveTimeFactor = 0.0,}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00122}00122                     DistanceFactor = 1.0,}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00123}00123                     MaxDelaySquaredFactor = SecondsToMetersFactor,}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00124}00124                     TotalDelaySquaredFactor = SecondsToMetersFactor,}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00125}00125                     MaxEarlyArrivalFactor = SecondsToMetersFactor,}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00126}00126                     TotalEarlyArrivalFactor = SecondsToMetersFactor,}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00127}00127                     LeftCargoUnitFactor = 1e8,}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00128}00128                     RoutesCountFactor = 1e4}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00129}00129                 \});}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00130}00130 }
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00131}00131             var routes = \textcolor{keyword}{new} List<Route>();}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00132}00132             var unassignedRequests = \textcolor{keyword}{new} List<TransportRequest>();}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00133}00133             unassignedRequests.AddRange(requests);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00134}00134             var requestsRoutesDictionary = \textcolor{keyword}{new} Dictionary<TransportRequest, Route>();}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00135}00135             var vehiclesRoutesDictionary = \textcolor{keyword}{new} Dictionary<Vehicle, SimpleVehicleSchedule>();}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00136}00136 }
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00137}00137             \textcolor{keywordflow}{foreach} (var request \textcolor{keywordflow}{in} requests)}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00138}00138             \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00139}00139                 var selectedVehicles = orderedCapcitatedVehicles.Where(v => v.CanHandleRequest(request)).ToList();}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00140}00140                 \textcolor{keywordflow}{if} (selectedVehicles.Any())}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00141}00141                 \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00142}00142                     var largest = selectedVehicles.Last();}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00143}00143                     \textcolor{keywordflow}{if} (largest.Capacity.Select((value, index) => index).Any(index => largest.Capacity[index] < 2 * request.Size[index]))}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00144}00144                     \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00145}00145                         \textcolor{keywordflow}{while} (selectedVehicles.Any())}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00146}00146                         \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00147}00147                             \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle}{Vehicle}} selectedVehicle = selectedVehicles[0];}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00148}00148                             \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_cluster_1_1_distribution_clustering_integrated_fldfd1ce4cb660c636c9c45e225caa8a15_a329a497262610e2cf8c85e5de7c21c16}{RandomizeVehicleChoice}})}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00149}00149                             \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00150}00150                                 selectedVehicle = selectedVehicles[rng.Next(selectedVehicles.Count)];}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00151}00151                             \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00152}00152                             \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route}{Route}} route = routeGenerator.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_generator_a14d38c67d367b1e598d3b783ccee1218}{CreateRoute}}(selectedVehicle, \textcolor{keyword}{null}, \textcolor{keyword}{null});}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00153}00153                             route.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_a6aa622fa28e3b2fba6fb07d5a420c1d6}{Insert}}(1, request);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00154}00154                             \textcolor{keywordflow}{if} (!vehiclesRoutesDictionary.ContainsKey(selectedVehicle))}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00155}00155                             \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00156}00156                                 vehiclesRoutesDictionary.Add(selectedVehicle, \textcolor{keyword}{new} \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_cluster_1_1_distribution_clustering_integrated_fleet_1_1_simple_vehicle_schedule}{SimpleVehicleSchedule}}(selectedVehicle, MaxDelayWithinRoute, MaxVehicleDelay));}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00157}00157                             \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00158}00158                             \textcolor{keywordflow}{if} (!vehiclesRoutesDictionary[selectedVehicle].RouteFitsIntoSchedule(route))}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00159}00159                             \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00160}00160                                 selectedVehicles.Remove(selectedVehicle);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00161}00161                                 \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00162}00162                             \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00163}00163                             unassignedRequests.Remove(request);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00164}00164                             requestsRoutesDictionary.Add(request, route);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00165}00165                             vehiclesRoutesDictionary[selectedVehicle].Add(route);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00166}00166                             \textcolor{keywordflow}{foreach} (var existingRoute \textcolor{keywordflow}{in} routes)}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00167}00167                             \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00168}00168                                 Debug.Assert(!(existingRoute.Vehicle.Id == route.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_a140570406d3a67e24ee5ad2ca5261abc}{Vehicle}}.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_resource_aacbb2ecbfc2ba0fa846364627af5a195}{Id}} \&\& existingRoute.ArrivalTimes[0] < route.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_ad537e352ef4f1a3879eae7132a1e0b3d}{DepartureTimes}}.Last() \&\& existingRoute.DepartureTimes.Last() > route.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_a09ea6c2152b5afe8e003cf5a12ad1bd6}{ArrivalTimes}}[0]));}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00169}00169                             \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00170}00170                             routes.Add(route);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00171}00171                             \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00172}00172                         \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00173}00173                     \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00174}00174                 \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00175}00175             \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00176}00176 }
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00177}00177             \textcolor{keywordflow}{foreach} (var edge \textcolor{keywordflow}{in} orderedEdges)}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00178}00178             \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00179}00179                 \textcolor{keywordflow}{if} (!requestsRoutesDictionary.ContainsKey(edge.FirstRequest) \&\&}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00180}00180                     !requestsRoutesDictionary.ContainsKey(edge.SecondRequest))}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00181}00181                 \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00182}00182                     var requestSet = \textcolor{keyword}{new} List<TransportRequest>(\textcolor{keyword}{new} \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_transport_request}{TransportRequest}}[] \{ edge.FirstRequest, edge.SecondRequest \});}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00183}00183                     var selectedVehicles = orderedCapcitatedVehicles.Where(v => v.CanFitRequests(requestSet)).ToList();}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00184}00184                     selectedVehicles.Reverse();}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00185}00185                     \textcolor{keywordflow}{while} (selectedVehicles.Any())}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00186}00186                     \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00187}00187                         \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_vehicle}{Vehicle}} selectedVehicle = selectedVehicles[0];}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00188}00188                         \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_cluster_1_1_distribution_clustering_integrated_fldfd1ce4cb660c636c9c45e225caa8a15_a329a497262610e2cf8c85e5de7c21c16}{RandomizeVehicleChoice}})}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00189}00189                         \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00190}00190                             selectedVehicle = selectedVehicles[rng.Next(selectedVehicles.Count)];}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00191}00191                         \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00192}00192                         \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route}{Route}} route = routeGenerator.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_generator_a14d38c67d367b1e598d3b783ccee1218}{CreateRoute}}(selectedVehicle, \textcolor{keyword}{null}, \textcolor{keyword}{null});}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00193}00193                         route.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_a6aa622fa28e3b2fba6fb07d5a420c1d6}{Insert}}(1, edge.FirstRequest);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00194}00194                         \textcolor{keywordflow}{if} (edge.Weight == 0)}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00195}00195                         \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00196}00196                             route.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_a6aa622fa28e3b2fba6fb07d5a420c1d6}{Insert}}(1, edge.SecondRequest);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00197}00197                         \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00198}00198                         \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00199}00199                         \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00200}00200                             route.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_a6aa622fa28e3b2fba6fb07d5a420c1d6}{Insert}}(2, edge.SecondRequest);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00201}00201                         \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00202}00202                         \textcolor{keywordflow}{if} (!vehiclesRoutesDictionary.ContainsKey(selectedVehicle))}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00203}00203                         \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00204}00204                             vehiclesRoutesDictionary.Add(selectedVehicle, \textcolor{keyword}{new} \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_cluster_1_1_distribution_clustering_integrated_fleet_1_1_simple_vehicle_schedule}{SimpleVehicleSchedule}}(selectedVehicle, MaxDelayWithinRoute, MaxVehicleDelay));}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00205}00205                         \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00206}00206                         \textcolor{keywordflow}{if} (!vehiclesRoutesDictionary[selectedVehicle].RouteFitsIntoSchedule(route))}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00207}00207                         \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00208}00208                             selectedVehicles.Remove(selectedVehicle);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00209}00209                             \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00210}00210                         \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00211}00211                         unassignedRequests.Remove(edge.FirstRequest);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00212}00212                         unassignedRequests.Remove(edge.SecondRequest);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00213}00213                         requestsRoutesDictionary.Add(edge.FirstRequest, route);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00214}00214                         requestsRoutesDictionary.Add(edge.SecondRequest, route);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00215}00215                         vehiclesRoutesDictionary[selectedVehicle].Add(route);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00216}00216                         \textcolor{keywordflow}{foreach} (var existingRoute \textcolor{keywordflow}{in} routes)}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00217}00217                         \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00218}00218                             Debug.Assert(!(existingRoute.Vehicle.Id == route.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_a140570406d3a67e24ee5ad2ca5261abc}{Vehicle}}.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_resource_aacbb2ecbfc2ba0fa846364627af5a195}{Id}} \&\& existingRoute.ArrivalTimes[0] < route.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_ad537e352ef4f1a3879eae7132a1e0b3d}{DepartureTimes}}.Last() \&\& existingRoute.DepartureTimes.Last() > route.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_a09ea6c2152b5afe8e003cf5a12ad1bd6}{ArrivalTimes}}[0]));}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00219}00219                         \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00220}00220                         routes.Add(route);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00221}00221                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00222}00222                     \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00223}00223                 \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00224}00224                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!requestsRoutesDictionary.ContainsKey(edge.SecondRequest))}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00225}00225                 \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00226}00226                     var route = requestsRoutesDictionary[edge.FirstRequest];}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00227}00227                     var visitedLocations = route.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_a6695d74ac9a5f5a03f2c8bd3cef06ba0}{VisitedLocations}};}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00228}00228                     \textcolor{keywordflow}{if} (visitedLocations.IndexOf(edge.FirstRequest.DeliveryLocation) == visitedLocations.Count -\/ 2)}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00229}00229                     \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00230}00230                         var result = route.ComputeInsertionCost(visitedLocations.Count -\/ 1, edge.SecondRequest);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00231}00231                         \textcolor{keywordflow}{if} (result.Success)}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00232}00232                         \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00233}00233                             var requestsSet = \textcolor{keyword}{new} Dictionary<TransportRequest, int>();}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00234}00234                             \textcolor{keywordtype}{int} offset = 1;}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00235}00235                             offset = FillInRequestsSetFromRoute(route, requestsSet, offset);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00236}00236                             requestsSet.Add(edge.SecondRequest, offset);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00237}00237                             \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_cluster_1_1_distribution_clustering_integrated_fleet_1_1_simple_vehicle_schedule}{SimpleVehicleSchedule}} vehicleSchedule = vehiclesRoutesDictionary[route.Vehicle];}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00238}00238                             ExtendRoute(routeGenerator, unassignedRequests, routes, requestsRoutesDictionary, route, requestsSet, vehicleSchedule, edge.SecondRequest);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00239}00239                         \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00240}00240                     \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00241}00241                     \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00242}00242                     \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00243}00243                         var result = route.FindBestInsertionForRequest(edge.SecondRequest);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00244}00244                         var vehiclesRoutes = vehiclesRoutesDictionary[route.Vehicle];}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00245}00245                         \textcolor{keywordflow}{if} (result.Success)}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00246}00246                         \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00247}00247                             var requestsSet = \textcolor{keyword}{new} Dictionary<TransportRequest, int>();}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00248}00248                             \textcolor{keywordtype}{int} offset = 1;}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00249}00249                             offset = FillInRequestsSetFromRoute(route, requestsSet, offset);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00250}00250                             requestsSet.Add(edge.SecondRequest, result.InsertionIndex);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00251}00251                             \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_cluster_1_1_distribution_clustering_integrated_fleet_1_1_simple_vehicle_schedule}{SimpleVehicleSchedule}} vehicleSchedule = vehiclesRoutesDictionary[route.Vehicle];}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00252}00252                             ExtendRoute(routeGenerator, unassignedRequests, routes, requestsRoutesDictionary, route, requestsSet, vehicleSchedule, edge.SecondRequest);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00253}00253                         \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00254}00254                     \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00255}00255                 \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00256}00256                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!requestsRoutesDictionary.ContainsKey(edge.FirstRequest))}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00257}00257                 \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00258}00258                     var route = requestsRoutesDictionary[edge.SecondRequest];}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00259}00259                     var visitedLocations = route.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_a6695d74ac9a5f5a03f2c8bd3cef06ba0}{VisitedLocations}};}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00260}00260                     \textcolor{keywordflow}{if} (visitedLocations.IndexOf(edge.SecondRequest.DeliveryLocation) == 1)}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00261}00261                     \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00262}00262                         var result = route.ComputeInsertionCost(1, edge.FirstRequest);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00263}00263                         var vehiclesRoutes = vehiclesRoutesDictionary[route.Vehicle];}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00264}00264                         \textcolor{keywordflow}{if} (result.Success)}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00265}00265                         \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00266}00266                             var requestsSet = \textcolor{keyword}{new} Dictionary<TransportRequest, int>();}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00267}00267                             requestsSet.Add(edge.FirstRequest, 1);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00268}00268                             \textcolor{keywordtype}{int} offset = 2;}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00269}00269                             offset = FillInRequestsSetFromRoute(route, requestsSet, offset);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00270}00270                             \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_cluster_1_1_distribution_clustering_integrated_fleet_1_1_simple_vehicle_schedule}{SimpleVehicleSchedule}} vehicleSchedule = vehiclesRoutesDictionary[route.Vehicle];}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00271}00271                             ExtendRoute(routeGenerator, unassignedRequests, routes, requestsRoutesDictionary, route, requestsSet, vehicleSchedule, edge.FirstRequest);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00272}00272                         \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00273}00273                     \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00274}00274                     \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00275}00275                     \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00276}00276                         var result = route.FindBestInsertionForRequest(edge.FirstRequest);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00277}00277                         var vehiclesRoutes = vehiclesRoutesDictionary[route.Vehicle];}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00278}00278                         \textcolor{keywordflow}{if} (result.Success)}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00279}00279                         \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00280}00280                             var requestsSet = \textcolor{keyword}{new} Dictionary<TransportRequest, int>();}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00281}00281                             \textcolor{keywordtype}{int} offset = 1;}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00282}00282                             offset = FillInRequestsSetFromRoute(route, requestsSet, offset);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00283}00283                             requestsSet.Add(edge.FirstRequest, result.InsertionIndex);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00284}00284                             \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_cluster_1_1_distribution_clustering_integrated_fleet_1_1_simple_vehicle_schedule}{SimpleVehicleSchedule}} vehicleSchedule = vehiclesRoutesDictionary[route.Vehicle];}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00285}00285                             ExtendRoute(routeGenerator, unassignedRequests, routes, requestsRoutesDictionary, route, requestsSet, vehicleSchedule, edge.FirstRequest);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00286}00286                         \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00287}00287                     \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00288}00288                 \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00289}00289                 \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00290}00290                 \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00291}00291                     var route1 = requestsRoutesDictionary[edge.FirstRequest];}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00292}00292                     var route2 = requestsRoutesDictionary[edge.SecondRequest];}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00293}00293                     \textcolor{keywordflow}{if} (route1 != route2)}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00294}00294                     \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00295}00295                         var visitedLocations1 = route1.VisitedLocations;}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00296}00296                         var visitedLocations2 = route2.VisitedLocations;}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00297}00297                         var requestsSet = \textcolor{keyword}{new} Dictionary<TransportRequest, int>();}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00298}00298                         \textcolor{keywordtype}{int} offset = 1;}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00299}00299                         offset = FillInRequestsSetFromRoute(route1, requestsSet, offset);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00300}00300                         offset = FillInRequestsSetFromRoute(route2, requestsSet, offset);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00301}00301                         List<TransportRequest> requestsSetKeys = requestsSet.Keys.ToList();}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00302}00302                         \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route}{Route}} newRoute = \textcolor{keyword}{null};}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00303}00303                         \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_cluster_1_1_distribution_clustering_integrated_fldfd1ce4cb660c636c9c45e225caa8a15_a329a497262610e2cf8c85e5de7c21c16}{RandomizeVehicleChoice}} \&\& route1.Vehicle.CanFitRequests(requestsSetKeys) \&\& route2.Vehicle.CanFitRequests(requestsSetKeys))}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00304}00304                         \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00305}00305                             \textcolor{keywordflow}{if} (rng.Next(2) > 0)}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00306}00306                             \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00307}00307                                 newRoute = routeGenerator.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_generator_a14d38c67d367b1e598d3b783ccee1218}{CreateRoute}}(route1.Vehicle, \textcolor{keyword}{null}, \textcolor{keyword}{null});}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00308}00308                             \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00309}00309                             \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00310}00310                             \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00311}00311                                 newRoute = routeGenerator.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_generator_a14d38c67d367b1e598d3b783ccee1218}{CreateRoute}}(route2.Vehicle, \textcolor{keyword}{null}, \textcolor{keyword}{null});}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00312}00312                             \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00313}00313                         \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00314}00314                         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (route1.Vehicle.CanFitRequests(requestsSetKeys)\textcolor{comment}{/* \&\& vehiclesRoutesDictionary[route1.Vehicle].Count <= 1*/})}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00315}00315                         \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00316}00316                             newRoute = routeGenerator.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_generator_a14d38c67d367b1e598d3b783ccee1218}{CreateRoute}}(route1.Vehicle, \textcolor{keyword}{null}, \textcolor{keyword}{null});}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00317}00317                         \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00318}00318                         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (route2.Vehicle.CanFitRequests(requestsSetKeys)\textcolor{comment}{/* \&\& vehiclesRoutesDictionary[route2.Vehicle].Count <= 1*/})}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00319}00319                         \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00320}00320                             newRoute = routeGenerator.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_generator_a14d38c67d367b1e598d3b783ccee1218}{CreateRoute}}(route2.Vehicle, \textcolor{keyword}{null}, \textcolor{keyword}{null});}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00321}00321                         \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00322}00322                         \textcolor{keywordflow}{if} (newRoute != \textcolor{keyword}{null})}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00323}00323                         \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00324}00324                             var success = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00325}00325                             \textcolor{keywordflow}{if} (visitedLocations1.IndexOf(edge.FirstRequest.DeliveryLocation) == visitedLocations1.Count -\/ 2}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00326}00326                                 \&\& visitedLocations2.IndexOf(edge.SecondRequest.DeliveryLocation) == 1)}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00327}00327                             \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00328}00328                                 \textcolor{keywordflow}{foreach} (var transportRequest \textcolor{keywordflow}{in} requestsSetKeys)}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00329}00329                                 \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00330}00330                                     \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_insertion_result}{InsertionResult}} insertionResult = newRoute.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_a6aa622fa28e3b2fba6fb07d5a420c1d6}{Insert}}(requestsSet[transportRequest], transportRequest);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00331}00331                                     \textcolor{keywordflow}{if} (!insertionResult.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_insertion_result_a4eebd85d70ef6813d7a00f897b6a8e41}{Success}})}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00332}00332                                     \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00333}00333                                         success = \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00334}00334                                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00335}00335                                     \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00336}00336                                 \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00337}00337                             \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00338}00338                             \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00339}00339                             \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00340}00340                                 var requestsSetMain = \textcolor{keyword}{new} Dictionary<TransportRequest, int>();}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00341}00341                                 var requestsSetAdditional = \textcolor{keyword}{new} Dictionary<TransportRequest, int>();}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00342}00342                                 \textcolor{keywordflow}{if} (route1.VisitedLocations.Count > route2.VisitedLocations.Count)}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00343}00343                                 \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00344}00344                                     FillInRequestsSetFromRoute(route1, requestsSetMain, 1);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00345}00345                                     FillInRequestsSetFromRoute(route2, requestsSetAdditional, 1);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00346}00346                                 \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00347}00347                                 \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00348}00348                                 \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00349}00349                                     FillInRequestsSetFromRoute(route2, requestsSetMain, 1);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00350}00350                                     FillInRequestsSetFromRoute(route1, requestsSetAdditional, 1);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00351}00351                                 \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00352}00352                                 \textcolor{keywordflow}{foreach} (var transportRequest \textcolor{keywordflow}{in} requestsSetMain.Keys.ToList())}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00353}00353                                 \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00354}00354                                     \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_insertion_result}{InsertionResult}} insertionResult = newRoute.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_a6aa622fa28e3b2fba6fb07d5a420c1d6}{Insert}}(requestsSetMain[transportRequest], transportRequest);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00355}00355                                     \textcolor{keywordflow}{if} (!insertionResult.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_insertion_result_a4eebd85d70ef6813d7a00f897b6a8e41}{Success}})}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00356}00356                                     \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00357}00357                                         success = \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00358}00358                                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00359}00359                                     \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00360}00360                                 \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00361}00361                                 \textcolor{keywordflow}{foreach} (var transportRequest \textcolor{keywordflow}{in} requestsSetAdditional.Keys.ToList())}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00362}00362                                 \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00363}00363                                     var insertionResult = newRoute.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_aaf81f66364ec072d55448a40d82eee86}{FindBestInsertionForRequest}}(transportRequest);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00364}00364                                     \textcolor{keywordflow}{if} (!insertionResult.Success)}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00365}00365                                     \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00366}00366                                         success = \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00367}00367                                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00368}00368                                     \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00369}00369                                     \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00370}00370                                     \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00371}00371                                         var standardInsertionResult = newRoute.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_a6aa622fa28e3b2fba6fb07d5a420c1d6}{Insert}}(insertionResult.InsertionIndex, transportRequest);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00372}00372                                         \textcolor{keywordflow}{if} (!standardInsertionResult.Success)}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00373}00373                                         \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00374}00374                                             success = \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00375}00375                                             \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00376}00376                                         \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00377}00377                                     \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00378}00378                                 \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00379}00379                             \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00380}00380                             vehiclesRoutesDictionary[route1.Vehicle].Remove(route1);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00381}00381                             vehiclesRoutesDictionary[route2.Vehicle].Remove(route2);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00382}00382                             \textcolor{keywordflow}{if} (!vehiclesRoutesDictionary[newRoute.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_a140570406d3a67e24ee5ad2ca5261abc}{Vehicle}}].RouteFitsIntoSchedule(newRoute))}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00383}00383                             \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00384}00384                                 success = \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00385}00385                                 vehiclesRoutesDictionary[route1.Vehicle].Add(route1);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00386}00386                                 vehiclesRoutesDictionary[route2.Vehicle].Add(route2);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00387}00387                             \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00388}00388                             \textcolor{keywordflow}{if} (success)}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00389}00389                             \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00390}00390                                 vehiclesRoutesDictionary[newRoute.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_a140570406d3a67e24ee5ad2ca5261abc}{Vehicle}}].Add(newRoute);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00391}00391                                 \textcolor{keywordflow}{foreach} (var transportRequest \textcolor{keywordflow}{in} requestsSetKeys)}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00392}00392                                 \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00393}00393                                     requestsRoutesDictionary[transportRequest] = newRoute;}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00394}00394                                 \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00395}00395                                 routes.Remove(route1);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00396}00396                                 routes.Remove(route2);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00397}00397                                 Debug.Assert(!routes.Any(existingRoute => existingRoute.Vehicle.Id == newRoute.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_a140570406d3a67e24ee5ad2ca5261abc}{Vehicle}}.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_resource_aacbb2ecbfc2ba0fa846364627af5a195}{Id}} \&\& existingRoute.ArrivalTimes[0] < newRoute.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_ad537e352ef4f1a3879eae7132a1e0b3d}{DepartureTimes}}.Last() \&\& existingRoute.DepartureTimes.Last() > newRoute.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_a09ea6c2152b5afe8e003cf5a12ad1bd6}{ArrivalTimes}}[0]));}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00398}00398                                 routes.Add(newRoute);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00399}00399                             \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00400}00400                         \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00401}00401                     \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00402}00402                 \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00403}00403             \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00404}00404             var finallyUnassignedRequests = \textcolor{keyword}{new} List<TransportRequest>();}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00405}00405             \textcolor{keywordflow}{while} (unassignedRequests.Any())}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00406}00406             \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00407}00407                 var selectedRequest = unassignedRequests.First();}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00408}00408                 \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_extended_insertion_result}{ExtendedInsertionResult}} bestInsertionResult = \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_extended_insertion_result}{ExtendedInsertionResult}}.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_extended_insertion_result_a2cfba94fb83047588e44d549b70b238e}{GenerateWorstResult}}();}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00409}00409                 \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route}{Route}} bestRoute = \textcolor{keyword}{null};}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00410}00410                 \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route}{Route}} routeToBeInserted = \textcolor{keyword}{null};}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00411}00411                 \textcolor{keywordflow}{foreach} (var route \textcolor{keywordflow}{in} routes)}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00412}00412                 \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00413}00413                     \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_extended_insertion_result}{ExtendedInsertionResult}} currentRouteResult = route.FindBestInsertionForRequest(selectedRequest);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00414}00414                     \textcolor{keywordflow}{if} (currentRouteResult.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_extended_insertion_result_acab50489201df7db00646d46209df0e0}{CompareTo}}(bestInsertionResult) < 0)}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00415}00415                     \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00416}00416                         var requestsSet = \textcolor{keyword}{new} Dictionary<TransportRequest, int>();}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00417}00417                         \textcolor{keywordtype}{int} offset = 1;}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00418}00418                         offset = FillInRequestsSetFromRoute(route, requestsSet, offset);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00419}00419                         requestsSet.Add(selectedRequest, currentRouteResult.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_extended_insertion_result_a6e51c2eb74841f75a61544b4daf3fb06}{InsertionIndex}});}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00420}00420                         var newRoute = routeGenerator.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_generator_a14d38c67d367b1e598d3b783ccee1218}{CreateRoute}}(route.Vehicle, route.VehicleTractor, route.VehicleDriver);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00421}00421                         \textcolor{keywordflow}{foreach} (var request \textcolor{keywordflow}{in} requestsSet.Keys.ToList())}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00422}00422                         \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00423}00423                             newRoute.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_a6aa622fa28e3b2fba6fb07d5a420c1d6}{Insert}}(requestsSet[request], request);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00424}00424                         \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00425}00425                         vehiclesRoutesDictionary[route.Vehicle].Remove(route);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00426}00426                         \textcolor{keywordflow}{if} (vehiclesRoutesDictionary[route.Vehicle].RouteFitsIntoSchedule(newRoute))}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00427}00427                         \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00428}00428                             bestInsertionResult = currentRouteResult;}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00429}00429                             bestRoute = route;}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00430}00430                             routeToBeInserted = newRoute;}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00431}00431                         \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00432}00432                         vehiclesRoutesDictionary[route.Vehicle].Add(route);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00433}00433                     \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00434}00434                 \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00435}00435                 unassignedRequests.Remove(selectedRequest);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00436}00436                 \textcolor{keywordflow}{if} (bestRoute != \textcolor{keyword}{null})}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00437}00437                 \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00438}00438                     vehiclesRoutesDictionary[bestRoute.Vehicle].Remove(bestRoute);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00439}00439                     vehiclesRoutesDictionary[bestRoute.Vehicle].Add(routeToBeInserted);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00440}00440                     routes.Remove(bestRoute);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00441}00441                     Debug.Assert(!routes.Any(existingRoute => existingRoute.Vehicle.Id == routeToBeInserted.Vehicle.Id \&\& existingRoute.ArrivalTimes[0] < routeToBeInserted.DepartureTimes.Last() \&\& existingRoute.DepartureTimes.Last() > routeToBeInserted.ArrivalTimes[0]));}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00442}00442                     routes.Add(routeToBeInserted);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00443}00443                     requestsRoutesDictionary.Add(selectedRequest, routeToBeInserted);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00444}00444                 \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00445}00445                 \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00446}00446                 \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00447}00447                     var selectedVehicles = orderedCapcitatedVehicles}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00448}00448                         .Where(v => v.CanHandleRequest(selectedRequest))}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00449}00449                         .OrderByDescending(v => vehiclesRoutesDictionary.ContainsKey(v) ? 1 : 0)}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00450}00450                         .ToList();}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00451}00451                     \textcolor{keywordflow}{while} (selectedVehicles.Any())}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00452}00452                     \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00453}00453                         var selectedVehicle = selectedVehicles.First();}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00454}00454                         \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_cluster_1_1_distribution_clustering_integrated_fldfd1ce4cb660c636c9c45e225caa8a15_a329a497262610e2cf8c85e5de7c21c16}{RandomizeVehicleChoice}})}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00455}00455                         \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00456}00456                             var countSelected = selectedVehicles.Count();}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00457}00457                             selectedVehicle = selectedVehicles.ElementAt(rng.Next(countSelected));}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00458}00458                         \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00459}00459                         var route = routeGenerator.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_generator_a14d38c67d367b1e598d3b783ccee1218}{CreateRoute}}(selectedVehicle, \textcolor{keyword}{null}, \textcolor{keyword}{null});}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00460}00460                         route.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_a6aa622fa28e3b2fba6fb07d5a420c1d6}{Insert}}(1, selectedRequest);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00461}00461                         \textcolor{keywordflow}{if} (!vehiclesRoutesDictionary.ContainsKey(selectedVehicle))}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00462}00462                         \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00463}00463                             vehiclesRoutesDictionary.Add(selectedVehicle, \textcolor{keyword}{new} \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_cluster_1_1_distribution_clustering_integrated_fleet_1_1_simple_vehicle_schedule}{SimpleVehicleSchedule}}(selectedVehicle, MaxDelayWithinRoute, MaxVehicleDelay));}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00464}00464                         \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00465}00465                         \textcolor{keywordflow}{if} (vehiclesRoutesDictionary[selectedVehicle].RouteFitsIntoSchedule(route))}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00466}00466                         \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00467}00467                             vehiclesRoutesDictionary[selectedVehicle].Add(route);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00468}00468                             Debug.Assert(!routes.Any(existingRoute => existingRoute.Vehicle.Id == route.Vehicle.Id \&\& existingRoute.ArrivalTimes[0] < route.DepartureTimes.Last() \&\& existingRoute.DepartureTimes.Last() > route.ArrivalTimes[0]));}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00469}00469                             routes.Add(route);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00470}00470                             requestsRoutesDictionary.Add(selectedRequest, route);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00471}00471                             \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00472}00472                         \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00473}00473                         \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00474}00474                         \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00475}00475                             selectedVehicles.Remove(selectedVehicle);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00476}00476                             \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00477}00477                         \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00478}00478                     \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00479}00479                     \textcolor{keywordflow}{if} (!requestsRoutesDictionary.ContainsKey(selectedRequest))}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00480}00480                     \{}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00481}00481                         finallyUnassignedRequests.Add(selectedRequest);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00482}00482                     \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00483}00483                 \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00484}00484             \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00485}00485 }
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00486}00486             IEnumerable<TransportRequest> requestsInRoutesAndUnassigned = routes.SelectMany(rt => rt.LoadedRequests[0]).Concat(finallyUnassignedRequests);}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00487}00487             Debug.Assert(requests.All(rq => requestsInRoutesAndUnassigned.Contains(rq)));}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00488}00488             Debug.Assert(requests.All(rq => requestsInRoutesAndUnassigned.Count(rq2 => rq == rq2) == 1));}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00489}00489             \textcolor{keywordflow}{return} \textcolor{keyword}{new}() \{ LeftRequests = finallyUnassignedRequests, Routes = routes.Select(rt => rt as \mbox{\hyperlink{interface_v_r_p_t_w_optimizer_1_1_interfaces_1_1_i_route}{IRoute}}).ToList() \};}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00490}00490         \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00491}00491     \}}
\DoxyCodeLine{\Hypertarget{_distribution_clustering_integrated_fleet_2_clusterizing_v_r_p_optimizer_8cs_source_l00492}00492 \}}

\end{DoxyCode}
