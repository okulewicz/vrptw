\hypertarget{_dictionary_distance_provider_base_8cs_source}{}\doxysection{Dictionary\+Distance\+Provider\+Base.\+cs}
\label{_dictionary_distance_provider_base_8cs_source}\index{DictionaryDistanceProviderBase.cs@{DictionaryDistanceProviderBase.cs}}
\mbox{\hyperlink{_dictionary_distance_provider_base_8cs}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00001}00001 \textcolor{keyword}{using} \mbox{\hyperlink{namespace_common_g_i_s}{CommonGIS}};}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00002}00002 \textcolor{keyword}{using} \mbox{\hyperlink{namespace_common_g_i_s}{CommonGIS}}.\mbox{\hyperlink{namespace_common_g_i_s_1_1_interfaces}{Interfaces}};}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00003}00003 \textcolor{keyword}{using} System.Collections.Generic;}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00004}00004 \textcolor{keyword}{using} System.Linq;}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00005}00005 }
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00006}\mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_distance_providers}{00006}} \textcolor{keyword}{namespace }\mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_distance_providers}{VRPTWOptimizer.DistanceProviders}}}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00007}00007 \{}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00008}\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_distance_providers_1_1_dictionary_distance_provider_base}{00008}}     \textcolor{keyword}{public} \textcolor{keyword}{abstract} \textcolor{keyword}{class }\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_distance_providers_1_1_dictionary_distance_provider_base}{DictionaryDistanceProviderBase}} : \mbox{\hyperlink{interface_common_g_i_s_1_1_interfaces_1_1_i_distance_provider}{IDistanceProvider}}}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00009}00009     \{}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00010}\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_distance_providers_1_1_dictionary_distance_provider_base_ae1525915ab400882d74a2c366e192f51}{00010}}         \textcolor{keyword}{protected} Dictionary<string, Dictionary<string, Dictionary<VehicleRoadRestrictionProperties, Distance>>> \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_distance_providers_1_1_dictionary_distance_provider_base_ae1525915ab400882d74a2c366e192f51}{distanceMatrix}};}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00011}\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_distance_providers_1_1_dictionary_distance_provider_base_af463f7a1f9be63857eacee2c5b71b6c1}{00011}}         \textcolor{keyword}{protected} Dictionary<VehicleRoadRestrictionProperties, VehicleRoadRestrictionProperties> \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_distance_providers_1_1_dictionary_distance_provider_base_af463f7a1f9be63857eacee2c5b71b6c1}{vehicleToProfileMapper}};}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00012}\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_distance_providers_1_1_dictionary_distance_provider_base_ac6c499ae51df546d1b11491c3fdfd538}{00012}}         \textcolor{keyword}{protected} \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_distance_providers_1_1_dictionary_distance_provider_base_ac6c499ae51df546d1b11491c3fdfd538}{SelfContain}};}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00013}00013 }
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00014}\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_distance_providers_1_1_dictionary_distance_provider_base_adfad2e197909a14cc86578f78e4e9448}{00014}}         \textcolor{keyword}{protected} \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_distance_providers_1_1_dictionary_distance_provider_base_adfad2e197909a14cc86578f78e4e9448}{DictionaryDistanceProviderBase}}(\textcolor{keywordtype}{bool} selfContain)}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00015}00015         \{}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00016}00016             \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_distance_providers_1_1_dictionary_distance_provider_base_ac1eeade0cf12ca78c5a4a8f587311d28}{StoredDistances}} = \textcolor{keyword}{new} List<Distance>();}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00017}00017             \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_distance_providers_1_1_dictionary_distance_provider_base_ac6c499ae51df546d1b11491c3fdfd538}{SelfContain}} = selfContain;}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00018}00018             \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_distance_providers_1_1_dictionary_distance_provider_base_ae1525915ab400882d74a2c366e192f51}{distanceMatrix}} = \textcolor{keyword}{new} Dictionary<string, Dictionary<string, Dictionary<VehicleRoadRestrictionProperties, Distance>>>();}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00019}00019             \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_distance_providers_1_1_dictionary_distance_provider_base_af463f7a1f9be63857eacee2c5b71b6c1}{vehicleToProfileMapper}} = \textcolor{keyword}{new} Dictionary<VehicleRoadRestrictionProperties, VehicleRoadRestrictionProperties>(\mbox{\hyperlink{class_common_g_i_s_1_1_vehicle_road_restrictions_comparer}{VehicleRoadRestrictionsComparer}}.\mbox{\hyperlink{class_common_g_i_s_1_1_vehicle_road_restrictions_comparer_a0dfcc270d1943af2a6dfabda3557db3a}{Instance}});}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00020}00020         \}}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00021}00021 }
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00022}\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_distance_providers_1_1_dictionary_distance_provider_base_ac1eeade0cf12ca78c5a4a8f587311d28}{00022}}         \textcolor{keyword}{public} List<Distance> \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_distance_providers_1_1_dictionary_distance_provider_base_ac1eeade0cf12ca78c5a4a8f587311d28}{StoredDistances}} \{ \textcolor{keyword}{get}; \textcolor{keyword}{set}; \}}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00023}00023 }
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00024}\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_distance_providers_1_1_dictionary_distance_provider_base_ae6260324b2987553bc5d8eebe483d878}{00024}}         \textcolor{keyword}{protected} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_distance_providers_1_1_dictionary_distance_provider_base_ae6260324b2987553bc5d8eebe483d878}{InitializeDistanceDictionary}}(List<Distance> distances)}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00025}00025         \{}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00026}00026             \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_distance_providers_1_1_dictionary_distance_provider_base_ac1eeade0cf12ca78c5a4a8f587311d28}{StoredDistances}}.AddRange(distances);}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00027}00027 }
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00028}00028             \textcolor{keywordflow}{foreach} (var distance \textcolor{keywordflow}{in} \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_distance_providers_1_1_dictionary_distance_provider_base_ac1eeade0cf12ca78c5a4a8f587311d28}{StoredDistances}})}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00029}00029             \{}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00030}00030                 \textcolor{keywordflow}{if} (!\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_distance_providers_1_1_dictionary_distance_provider_base_ae1525915ab400882d74a2c366e192f51}{distanceMatrix}}.ContainsKey(distance.FromId))}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00031}00031                 \{}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00032}00032                     \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_distance_providers_1_1_dictionary_distance_provider_base_ae1525915ab400882d74a2c366e192f51}{distanceMatrix}}.Add(distance.FromId, \textcolor{keyword}{new} Dictionary<\textcolor{keywordtype}{string}, Dictionary<VehicleRoadRestrictionProperties, Distance>>());}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00033}00033                 \}}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00034}00034                 \textcolor{keywordflow}{if} (!\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_distance_providers_1_1_dictionary_distance_provider_base_ae1525915ab400882d74a2c366e192f51}{distanceMatrix}}[distance.FromId].ContainsKey(distance.ToId))}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00035}00035                 \{}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00036}00036                     \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_distance_providers_1_1_dictionary_distance_provider_base_ae1525915ab400882d74a2c366e192f51}{distanceMatrix}}[distance.FromId].Add(distance.ToId, \textcolor{keyword}{new} Dictionary<VehicleRoadRestrictionProperties, Distance>(\mbox{\hyperlink{class_common_g_i_s_1_1_vehicle_road_restrictions_comparer}{VehicleRoadRestrictionsComparer}}.\mbox{\hyperlink{class_common_g_i_s_1_1_vehicle_road_restrictions_comparer_a0dfcc270d1943af2a6dfabda3557db3a}{Instance}}));}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00037}00037                 \}}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00038}00038                 \textcolor{keywordflow}{if} (!\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_distance_providers_1_1_dictionary_distance_provider_base_ae1525915ab400882d74a2c366e192f51}{distanceMatrix}}[distance.FromId][distance.ToId].ContainsKey(distance.Profile))}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00039}00039                 \{}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00040}00040                     \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_distance_providers_1_1_dictionary_distance_provider_base_ae1525915ab400882d74a2c366e192f51}{distanceMatrix}}[distance.FromId][distance.ToId].Add(distance.Profile, distance);}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00041}00041                 \}}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00042}00042             \}}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00043}00043         \}}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00044}00044 }
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00045}\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_distance_providers_1_1_dictionary_distance_provider_base_a9f94264495d574e45d241e3b64dae1d1}{00045}}         \textcolor{keyword}{public} \mbox{\hyperlink{class_common_g_i_s_1_1_distance}{Distance}} \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_distance_providers_1_1_dictionary_distance_provider_base_a9f94264495d574e45d241e3b64dae1d1}{GetDistance}}(}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00046}00046                     \mbox{\hyperlink{class_common_g_i_s_1_1_location}{Location}} from,}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00047}00047             \mbox{\hyperlink{class_common_g_i_s_1_1_location}{Location}} to,}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00048}00048             \mbox{\hyperlink{class_common_g_i_s_1_1_vehicle_road_restriction_properties}{VehicleRoadRestrictionProperties}} vehicleProperties)}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00049}00049         \{}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00050}00050             \textcolor{keywordflow}{if} (from.\mbox{\hyperlink{class_common_g_i_s_1_1_location_aa6d57fbce06f9491a85aac4e0ac69870}{Id}} == to.\mbox{\hyperlink{class_common_g_i_s_1_1_location_aa6d57fbce06f9491a85aac4e0ac69870}{Id}})}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00051}00051             \{}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00052}00052                 \textcolor{keywordflow}{return} \textcolor{keyword}{new} \mbox{\hyperlink{class_common_g_i_s_1_1_time_length_distance}{TimeLengthDistance}}(from.\mbox{\hyperlink{class_common_g_i_s_1_1_location_aa6d57fbce06f9491a85aac4e0ac69870}{Id}}, to.\mbox{\hyperlink{class_common_g_i_s_1_1_location_aa6d57fbce06f9491a85aac4e0ac69870}{Id}}, 0.0, 0.0, vehicleProperties);}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00053}00053             \}}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00054}00054             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_distance_providers_1_1_dictionary_distance_provider_base_ae1525915ab400882d74a2c366e192f51}{distanceMatrix}}.ContainsKey(from.\mbox{\hyperlink{class_common_g_i_s_1_1_location_aa6d57fbce06f9491a85aac4e0ac69870}{Id}}) \&\& \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_distance_providers_1_1_dictionary_distance_provider_base_ae1525915ab400882d74a2c366e192f51}{distanceMatrix}}[from.\mbox{\hyperlink{class_common_g_i_s_1_1_location_aa6d57fbce06f9491a85aac4e0ac69870}{Id}}].ContainsKey(to.\mbox{\hyperlink{class_common_g_i_s_1_1_location_aa6d57fbce06f9491a85aac4e0ac69870}{Id}}))}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00055}00055             \{}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00056}00056                 \textcolor{keywordflow}{if} (!\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_distance_providers_1_1_dictionary_distance_provider_base_af463f7a1f9be63857eacee2c5b71b6c1}{vehicleToProfileMapper}}.ContainsKey(vehicleProperties))}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00057}00057                 \{}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00058}00058                     var profileCapacity = \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_distance_providers_1_1_dictionary_distance_provider_base_ae1525915ab400882d74a2c366e192f51}{distanceMatrix}}[from.\mbox{\hyperlink{class_common_g_i_s_1_1_location_aa6d57fbce06f9491a85aac4e0ac69870}{Id}}][to.\mbox{\hyperlink{class_common_g_i_s_1_1_location_aa6d57fbce06f9491a85aac4e0ac69870}{Id}}].Keys}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00059}00059                         .Where(prf => prf.DoesVehicleFitIntoRestrictions(vehicleProperties))}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00060}00060                         .OrderBy(prf => prf.EpCount)}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00061}00061                         .OrderBy(prf => prf.GrossVehicleWeight)}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00062}00062                         .First();}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00063}00063                     \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_distance_providers_1_1_dictionary_distance_provider_base_af463f7a1f9be63857eacee2c5b71b6c1}{vehicleToProfileMapper}}.Add(vehicleProperties, profileCapacity);}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00064}00064                 \}}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00065}00065                 \textcolor{comment}{//TODO: zweryfikować którego dystansu właściwie brakuje}}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00066}00066                 \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_distance_providers_1_1_dictionary_distance_provider_base_ae1525915ab400882d74a2c366e192f51}{distanceMatrix}}[from.\mbox{\hyperlink{class_common_g_i_s_1_1_location_aa6d57fbce06f9491a85aac4e0ac69870}{Id}}][to.\mbox{\hyperlink{class_common_g_i_s_1_1_location_aa6d57fbce06f9491a85aac4e0ac69870}{Id}}].ContainsKey(\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_distance_providers_1_1_dictionary_distance_provider_base_af463f7a1f9be63857eacee2c5b71b6c1}{vehicleToProfileMapper}}[vehicleProperties]))}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00067}00067                 \{}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00068}00068                     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_distance_providers_1_1_dictionary_distance_provider_base_ae1525915ab400882d74a2c366e192f51}{distanceMatrix}}[from.\mbox{\hyperlink{class_common_g_i_s_1_1_location_aa6d57fbce06f9491a85aac4e0ac69870}{Id}}][to.\mbox{\hyperlink{class_common_g_i_s_1_1_location_aa6d57fbce06f9491a85aac4e0ac69870}{Id}}][\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_distance_providers_1_1_dictionary_distance_provider_base_af463f7a1f9be63857eacee2c5b71b6c1}{vehicleToProfileMapper}}[vehicleProperties]];}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00069}00069                 \}}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00070}00070 }
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00071}00071             \}}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00072}00072             \textcolor{keywordflow}{return} \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_distance_providers_1_1_dictionary_distance_provider_base_ac6c499ae51df546d1b11491c3fdfd538}{SelfContain}} ?}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00073}00073                 \textcolor{keyword}{new} \mbox{\hyperlink{class_common_g_i_s_1_1_time_length_distance}{TimeLengthDistance}}(from.\mbox{\hyperlink{class_common_g_i_s_1_1_location_aa6d57fbce06f9491a85aac4e0ac69870}{Id}}, to.\mbox{\hyperlink{class_common_g_i_s_1_1_location_aa6d57fbce06f9491a85aac4e0ac69870}{Id}}, \textcolor{keywordtype}{double}.MaxValue, \textcolor{keywordtype}{double}.MaxValue, vehicleProperties) : \textcolor{keyword}{null};}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00074}00074         \}}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00075}00075     \}}
\DoxyCodeLine{\Hypertarget{_dictionary_distance_provider_base_8cs_source_l00076}00076 \}}

\end{DoxyCode}
