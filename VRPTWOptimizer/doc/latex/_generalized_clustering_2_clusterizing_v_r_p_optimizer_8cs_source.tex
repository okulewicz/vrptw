\hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source}{}\doxysection{Generalized\+Clustering/\+Clusterizing\+VRPOptimizer.cs}
\label{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source}\index{ClusterizingVRPOptimizer.cs@{ClusterizingVRPOptimizer.cs}}
\mbox{\hyperlink{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00001}00001 \textcolor{keyword}{using} \mbox{\hyperlink{namespace_common_g_i_s}{CommonGIS}};}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00002}00002 \textcolor{keyword}{using} \mbox{\hyperlink{namespace_common_g_i_s}{CommonGIS}}.\mbox{\hyperlink{namespace_common_g_i_s_1_1_interfaces}{Interfaces}};}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00003}00003 \textcolor{keyword}{using} System;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00004}00004 \textcolor{keyword}{using} System.Collections.Generic;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00005}00005 \textcolor{keyword}{using} System.Diagnostics;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00006}00006 \textcolor{keyword}{using} System.Linq;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00007}00007 \textcolor{keyword}{using} \mbox{\hyperlink{namespace_v_r_p_t_w_optimizer}{VRPTWOptimizer}}.\mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_interfaces}{Interfaces}};}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00008}00008 \textcolor{keyword}{using} \mbox{\hyperlink{namespace_v_r_p_t_w_optimizer}{VRPTWOptimizer}}.\mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_utils}{Utils}}.\mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_utils_1_1_validation}{Validation}};}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00009}00009 }
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00010}\mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_cluster_1_1_generalized_clustering}{00010}} \textcolor{keyword}{namespace }\mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_cluster_1_1_generalized_clustering}{VRPTWOptimizer.BL.Meta.Cluster.GeneralizedClustering}}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00011}00011 \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00012}\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_cluster_1_1_generalized_clustering_1_1_clusterizing_v_r_p_optimizer}{00012}}     \textcolor{keyword}{public} \textcolor{keyword}{partial class }\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_cluster_1_1_generalized_clustering_1_1_clusterizing_v_r_p_optimizer}{ClusterizingVRPOptimizer}} : \mbox{\hyperlink{interface_v_r_p_t_w_optimizer_1_1_interfaces_1_1_i_v_r_p_optimizer}{IVRPOptimizer}}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00013}00013     \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00014}00014         \textcolor{comment}{//HACK constant factor for balancing time and distance}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00015}00015         \textcolor{keyword}{private} \textcolor{keyword}{const} \textcolor{keywordtype}{int} SecondsToMetersFactor = 16;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00016}00016         \textcolor{keyword}{private} readonly \textcolor{keywordtype}{bool} FilterOutTransferRequests;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00017}00017         \textcolor{keyword}{private} readonly \textcolor{keywordtype}{double} MaxDelayWithinRoute;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00018}00018         \textcolor{keyword}{private} readonly \textcolor{keywordtype}{double} MaxVehicleDelay;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00019}00019         \textcolor{keyword}{private} readonly \textcolor{keywordtype}{int} randomSeed;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00020}00020         \textcolor{keyword}{private} readonly Random rng;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00021}\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_cluster_1_1_generalized_clustering_1_1_clusterizing_v_r_p_optimizer_a65d0d493c5902c399f40e19f78a08f72}{00021}}         \textcolor{keyword}{public} \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_cluster_1_1_generalized_clustering_1_1_clusterizing_v_r_p_optimizer_a65d0d493c5902c399f40e19f78a08f72}{RandomizeVehicleChoice}} \{ \textcolor{keyword}{get}; \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00022}00022 }
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00023}00023         \textcolor{keyword}{internal} \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_cluster_1_1_generalized_clustering_1_1_clusterizing_v_r_p_optimizer}{ClusterizingVRPOptimizer}}(\textcolor{keywordtype}{bool} randomizeVehicleChoice, \textcolor{keywordtype}{int} randomSeed, \textcolor{keywordtype}{double} maxDelayWithinRoute, \textcolor{keywordtype}{double} maxVehicleDelay, \textcolor{keywordtype}{bool} filterOutTransferRequests)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00024}00024         \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00025}00025             this.randomSeed = randomSeed;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00026}00026             rng = \textcolor{keyword}{new} Random(randomSeed);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00027}00027             \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_cluster_1_1_generalized_clustering_1_1_clusterizing_v_r_p_optimizer_a65d0d493c5902c399f40e19f78a08f72}{RandomizeVehicleChoice}} = randomizeVehicleChoice;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00028}00028             MaxDelayWithinRoute = maxDelayWithinRoute;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00029}00029             MaxVehicleDelay = maxVehicleDelay;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00030}00030             FilterOutTransferRequests = filterOutTransferRequests;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00031}00031         \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00032}00032 }
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00033}00033         \textcolor{keyword}{private} \textcolor{keyword}{static} \textcolor{keywordtype}{bool} ExtendRoute(\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_generator}{RouteGenerator}} routeGenerator,}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00034}00034                                         List<Route> routes,}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00035}00035                                         Dictionary<TransportRequest, Route> requestsRoutesDictionary,}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00036}00036                                         \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route}{Route}} route,}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00037}00037                                         Dictionary<TransportRequest, int> requestsSet,}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00038}00038                                         Dictionary<Vehicle, VehicleSchedule> vehicleSchedules,}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00039}00039                                         \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_transport_request}{TransportRequest}} addedRequest,}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00040}00040                                         Dictionary<\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route}{Route}}, ISet<Route>> subsequentRoutes)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00041}00041         \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00042}00042             List<TransportRequest> requestsSetKeys = requestsSet.Keys.ToList();}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00043}00043             var newRoute = routeGenerator.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_generator_a14d38c67d367b1e598d3b783ccee1218}{CreateRoute}}(route.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_a140570406d3a67e24ee5ad2ca5261abc}{Vehicle}}, route.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_af661214282b61c0cf856f8f979022f9b}{VehicleTractor}}, route.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_a3973b1a8b30be252b9dc3270bb1de11b}{VehicleDriver}});}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00044}00044             \textcolor{keywordflow}{foreach} (var transportRequest \textcolor{keywordflow}{in} requestsSetKeys)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00045}00045             \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00046}00046                 \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_insertion_result}{InsertionResult}} insertionResult = newRoute.Insert(requestsSet[transportRequest], transportRequest);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00047}00047                 \textcolor{keywordflow}{if} (!insertionResult.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_insertion_result_a4eebd85d70ef6813d7a00f897b6a8e41}{Success}})}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00048}00048                 \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00049}00049                     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00050}00050                 \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00051}00051             \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00052}00052             route.SchedulesRemoveFrom(vehicleSchedules, routes, subsequentRoutes);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00053}00053             \textcolor{keywordflow}{if} (!vehicleSchedules[route.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_a140570406d3a67e24ee5ad2ca5261abc}{Vehicle}}].RouteFitsIntoSchedule(newRoute, vehicleSchedules, subsequentRoutes))}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00054}00054             \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00055}00055                 route.SchedulesAddTo(vehicleSchedules, routes, subsequentRoutes);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00056}00056                 \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00057}00057             \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00058}00058             newRoute.SchedulesAddTo(vehicleSchedules, routes, subsequentRoutes);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00059}00059             requestsRoutesDictionary.Add(addedRequest, newRoute);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00060}00060             \textcolor{keywordflow}{foreach} (var transportRequest \textcolor{keywordflow}{in} requestsSetKeys)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00061}00061             \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00062}00062                 requestsRoutesDictionary[transportRequest] = newRoute;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00063}00063             \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00064}00064             \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00065}00065         \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00066}00066 }
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00067}00067         \textcolor{keyword}{private} \textcolor{keyword}{static} \textcolor{keywordtype}{int} FillInRequestsSetFromRoute(Route route1, Dictionary<TransportRequest, int> requestsSet, \textcolor{keywordtype}{int} offset)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00068}00068         \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00069}00069             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 1; i < route1.VisitedLocations.Count -\/ 1; i++, offset++)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00070}00070             \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00071}00071                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < route1.UnloadedRequests[i].Count; j++)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00072}00072                 \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00073}00073                     requestsSet.Add(route1.UnloadedRequests[i][j], offset);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00074}00074                 \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00075}00075                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < route1.LoadedRequests[i].Count; j++)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00076}00076                 \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00077}00077                     requestsSet.Add(route1.LoadedRequests[i][j], offset);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00078}00078                 \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00079}00079             \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00080}00080 }
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00081}00081             \textcolor{keywordflow}{return} offset;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00082}00082         \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00083}00083 }
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00084}00084         \textcolor{keyword}{private} \textcolor{keyword}{static} \textcolor{keywordtype}{void} FindBestRouteToBeExtended(RouteGenerator routeGenerator, Dictionary<Vehicle, VehicleSchedule> vehiclesRoutesDictionary, TransportRequest selectedRequest, ref ExtendedInsertionResult bestInsertionResult, ref Route bestRoute, ref Route routeToBeInserted, Route route, Dictionary<Route, ISet<Route>> subsequentRoutes)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00085}00085         \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00086}00086             ExtendedInsertionResult currentRouteResult = route.FindBestInsertionForRequest(selectedRequest);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00087}00087             \textcolor{keywordflow}{if} (currentRouteResult.CompareTo(bestInsertionResult) < 0)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00088}00088             \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00089}00089                 var requestsSet = \textcolor{keyword}{new} Dictionary<TransportRequest, int>();}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00090}00090                 \textcolor{keywordtype}{int} offset = 1;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00091}00091                 offset = FillInRequestsSetFromRoute(route, requestsSet, offset);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00092}00092                 requestsSet.Add(selectedRequest, currentRouteResult.InsertionIndex);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00093}00093                 var newRoute = routeGenerator.CreateRoute(route.Vehicle, route.VehicleTractor, route.VehicleDriver);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00094}00094                 \textcolor{keywordflow}{foreach} (var request \textcolor{keywordflow}{in} requestsSet.Keys.ToList())}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00095}00095                 \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00096}00096                     newRoute.Insert(requestsSet[request], request);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00097}00097                 \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00098}00098 }
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00099}00099                 List<Route> tempRoutes = \textcolor{keyword}{new}();}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00100}00100                 route.SchedulesRemoveFrom(vehiclesRoutesDictionary, tempRoutes, subsequentRoutes);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00101}00101                 \textcolor{keywordflow}{if} (vehiclesRoutesDictionary[route.Vehicle].RouteFitsIntoSchedule(newRoute, vehiclesRoutesDictionary, subsequentRoutes))}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00102}00102                 \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00103}00103                     bestInsertionResult = currentRouteResult;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00104}00104                     bestRoute = route;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00105}00105                     routeToBeInserted = newRoute;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00106}00106                 \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00107}00107                 route.SchedulesAddTo(vehiclesRoutesDictionary, tempRoutes, subsequentRoutes);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00108}00108             \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00109}00109         \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00110}00110 }
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00111}00111         \textcolor{keyword}{private} \textcolor{keyword}{static} \textcolor{keywordtype}{bool} IdentifyMainRouteAndMergeSecondRouteRequestsIntoIt(Route route1, Route route2, Route newRoute)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00112}00112         \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00113}00113             var success = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00114}00114             var requestsSetMain = \textcolor{keyword}{new} Dictionary<TransportRequest, int>();}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00115}00115             var requestsSetAdditional = \textcolor{keyword}{new} Dictionary<TransportRequest, int>();}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00116}00116             \textcolor{keywordflow}{if} (route1.VisitedLocations.Count > route2.VisitedLocations.Count)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00117}00117             \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00118}00118                 FillInRequestsSetFromRoute(route1, requestsSetMain, 1);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00119}00119                 FillInRequestsSetFromRoute(route2, requestsSetAdditional, 1);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00120}00120             \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00121}00121             \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00122}00122             \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00123}00123                 FillInRequestsSetFromRoute(route2, requestsSetMain, 1);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00124}00124                 FillInRequestsSetFromRoute(route1, requestsSetAdditional, 1);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00125}00125             \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00126}00126             \textcolor{keywordflow}{foreach} (var transportRequest \textcolor{keywordflow}{in} requestsSetMain.Keys.ToList())}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00127}00127             \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00128}00128                 InsertionResult insertionResult = newRoute.Insert(requestsSetMain[transportRequest], transportRequest);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00129}00129                 \textcolor{keywordflow}{if} (!insertionResult.Success)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00130}00130                 \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00131}00131                     success = \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00132}00132                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00133}00133                 \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00134}00134             \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00135}00135             \textcolor{keywordflow}{foreach} (var transportRequest \textcolor{keywordflow}{in} requestsSetAdditional.Keys.ToList())}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00136}00136             \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00137}00137                 var insertionResult = newRoute.FindBestInsertionForRequest(transportRequest);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00138}00138                 \textcolor{keywordflow}{if} (!insertionResult.Success)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00139}00139                 \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00140}00140                     success = \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00141}00141                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00142}00142                 \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00143}00143                 newRoute.Insert(insertionResult.InsertionIndex, transportRequest);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00144}00144             \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00145}00145 }
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00146}00146             \textcolor{keywordflow}{return} success;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00147}00147         \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00148}00148 }
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00149}00149         \textcolor{keyword}{private} \textcolor{keyword}{static} \textcolor{keywordtype}{bool} MergeRequestSetIntoRouteSubsequently(Dictionary<TransportRequest, int> requestsSet, List<TransportRequest> requestsSetKeys, Route newRoute)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00150}00150         \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00151}00151             var success = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00152}00152             \textcolor{keywordflow}{foreach} (var transportRequest \textcolor{keywordflow}{in} requestsSetKeys)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00153}00153             \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00154}00154                 InsertionResult insertionResult = newRoute.Insert(requestsSet[transportRequest], transportRequest);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00155}00155                 \textcolor{keywordflow}{if} (!insertionResult.Success)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00156}00156                 \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00157}00157                     success = \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00158}00158                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00159}00159                 \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00160}00160             \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00161}00161 }
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00162}00162             \textcolor{keywordflow}{return} success;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00163}00163         \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00164}00164 }
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00165}00165         \textcolor{keyword}{private} \textcolor{keyword}{static} \textcolor{keywordtype}{void} TryAddSinglePointToExistingRoute(Route route, TransportRequest consideredRequest, \textcolor{keywordtype}{int} predefinedInsertionPoint, RouteGenerator routeGenerator, List<Route> routes, List<TransportRequest> unassignedRequests, Dictionary<TransportRequest, Route> requestsRoutesDictionary, Dictionary<Vehicle, VehicleSchedule> vehiclesRoutesDictionary, Dictionary<Route, ISet<Route>> subsequentRoutes)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00166}00166         \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00167}00167             ExtendedInsertionResult result;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00168}00168             \textcolor{keywordflow}{if} (predefinedInsertionPoint != -\/1)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00169}00169             \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00170}00170                 result = route.ComputeInsertionCost(predefinedInsertionPoint, consideredRequest);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00171}00171             \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00172}00172             \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00173}00173             \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00174}00174                 result = route.FindBestInsertionForRequest(consideredRequest);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00175}00175             \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00176}00176             \textcolor{keywordflow}{if} (result != \textcolor{keyword}{null} \&\& result.Success)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00177}00177             \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00178}00178                 predefinedInsertionPoint = result.InsertionIndex;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00179}00179             \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00180}00180             \textcolor{keywordflow}{if} (result.Success \&\& predefinedInsertionPoint != -\/1)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00181}00181             \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00182}00182                 var requestsSet = \textcolor{keyword}{new} Dictionary<TransportRequest, int>();}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00183}00183                 \textcolor{keywordtype}{int} offset = 1;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00184}00184                 FillInRequestsSetFromRoute(route, requestsSet, offset);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00185}00185                 requestsSet.Add(consideredRequest, predefinedInsertionPoint);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00186}00186                 \textcolor{keywordflow}{if} (ExtendRoute(routeGenerator, routes, requestsRoutesDictionary, route, requestsSet, vehiclesRoutesDictionary, consideredRequest, subsequentRoutes))}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00187}00187                 \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00188}00188                     unassignedRequests.Remove(consideredRequest);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00189}00189                 \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00190}00190             \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00191}00191         \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00192}00192 }
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00193}00193         \textcolor{keyword}{private} List<Route> CreateSeedRoutesForRequestsExceedingHalfCapacity(RouteGenerator routeGenerator, List<TransportRequest> requests, IOrderedEnumerable<Vehicle> orderedCapcitatedVehicles, IEnumerable<Vehicle> tractors, List<Route> routes, List<TransportRequest> unassignedRequests, Dictionary<TransportRequest, Route> requestsRoutesDictionary, Dictionary<Vehicle, VehicleSchedule> vehiclesRoutesDictionary, \textcolor{keywordtype}{string} homeDepotId, Dictionary<Route, ISet<Route>> subsequentRoutes)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00194}00194         \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00195}00195             \textcolor{keywordflow}{foreach} (var request \textcolor{keywordflow}{in} requests.Where(rq => rq.PickupLocation.Id == homeDepotId))}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00196}00196             \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00197}00197                 var selectedVehicles = orderedCapcitatedVehicles.Where(v => v.CanHandleRequest(request)).ToList();}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00198}00198                 var orderedTractors = tractors.OrderByDescending(tr => vehiclesRoutesDictionary[tr].Routes.Count).ToList();}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00199}00199                 \textcolor{keywordflow}{if} (selectedVehicles.Any())}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00200}00200                 \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00201}00201                     var largest = selectedVehicles.Last();}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00202}00202                     \textcolor{keywordflow}{if} (largest.Capacity.Select((value, index) => index).Any(index => largest.Capacity[index] < 2 * request.Size[index]))}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00203}00203                     \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00204}00204                         TryCreateRouteForRequests(routeGenerator, routes, unassignedRequests, requestsRoutesDictionary, vehiclesRoutesDictionary,}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00205}00205                             \textcolor{keyword}{new} List<TransportRequest>() \{ request \}, selectedVehicles, orderedTractors, subsequentRoutes);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00206}00206                     \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00207}00207                 \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00208}00208             \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00209}00209             \textcolor{keywordflow}{return} routes;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00210}00210         \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00211}00211 }
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00212}00212         \textcolor{keyword}{private} List<TransportRequest> FitInUnassignedRequestsIntoExistingSolution(RouteGenerator routeGenerator, IOrderedEnumerable<Vehicle> orderedCapcitatedVehicles, IEnumerable<Vehicle> tractors, List<Route> routes, List<TransportRequest> unassignedRequests, Dictionary<TransportRequest, Route> requestsRoutesDictionary, Dictionary<Vehicle, VehicleSchedule> vehiclesRoutesDictionary, Dictionary<Route, ISet<Route>> subsequentRoutes)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00213}00213         \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00214}00214             var finallyUnassignedRequests = \textcolor{keyword}{new} List<TransportRequest>();}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00215}00215             \textcolor{keywordflow}{while} (unassignedRequests.Any())}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00216}00216             \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00217}00217                 var selectedRequest = unassignedRequests.First();}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00218}00218                 ExtendedInsertionResult bestInsertionResult = ExtendedInsertionResult.GenerateWorstResult();}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00219}00219                 \mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_aae1d999843ee79c6abaea9828f4ec80ca9405c3aff9112c3c60d03b94792877dc}{Route}} bestRoute = \textcolor{keyword}{null};}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00220}00220                 \mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_aae1d999843ee79c6abaea9828f4ec80ca9405c3aff9112c3c60d03b94792877dc}{Route}} routeToBeInserted = \textcolor{keyword}{null};}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00221}00221                 \textcolor{keywordflow}{foreach} (var route \textcolor{keywordflow}{in} routes)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00222}00222                 \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00223}00223                     FindBestRouteToBeExtended(routeGenerator, vehiclesRoutesDictionary, selectedRequest, ref bestInsertionResult, ref bestRoute, ref routeToBeInserted, route, subsequentRoutes);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00224}00224                 \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00225}00225                 \textcolor{keywordflow}{if} (bestRoute != \textcolor{keyword}{null})}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00226}00226                 \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00227}00227                     bestRoute.SchedulesRemoveFrom(vehiclesRoutesDictionary, routes, subsequentRoutes);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00228}00228                     routeToBeInserted.SchedulesAddTo(vehiclesRoutesDictionary, routes, subsequentRoutes);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00229}00229                     requestsRoutesDictionary.Add(selectedRequest, routeToBeInserted);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00230}00230                     unassignedRequests.Remove(selectedRequest);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00231}00231                 \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00232}00232                 \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00233}00233                 \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00234}00234                     var selectedVehicles = orderedCapcitatedVehicles}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00235}00235                         .Where(v => v.CanHandleRequest(selectedRequest))}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00236}00236                         .OrderByDescending(v => vehiclesRoutesDictionary[v].Routes.Count)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00237}00237                         .ToList();}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00238}00238                     var orderedTractors = tractors.OrderByDescending(tr => vehiclesRoutesDictionary[tr].Routes.Count).ToList();}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00239}00239                     TryCreateRouteForRequests(routeGenerator, routes, unassignedRequests, requestsRoutesDictionary, vehiclesRoutesDictionary,}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00240}00240                          \textcolor{keyword}{new} List<TransportRequest>() \{ selectedRequest \}, selectedVehicles, orderedTractors, subsequentRoutes);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00241}00241                     routes.ForEach(rt => rt.CheckOverlapAndCapacity(routes));}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00242}00242 }
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00243}00243                     \textcolor{keywordflow}{if} (!requestsRoutesDictionary.ContainsKey(selectedRequest))}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00244}00244                     \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00245}00245                         unassignedRequests.Remove(selectedRequest);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00246}00246                         finallyUnassignedRequests.Add(selectedRequest);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00247}00247                     \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00248}00248                 \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00249}00249             \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00250}00250             \textcolor{keywordflow}{return} finallyUnassignedRequests;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00251}00251         \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00252}00252 }
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00253}00253         \textcolor{keyword}{private} \textcolor{keywordtype}{void} IntializeVehicleRoutesDictionary(IOrderedEnumerable<Vehicle> orderedCapcitatedVehicles, IEnumerable<Vehicle> tractors, Dictionary<Vehicle, VehicleSchedule> vehiclesRoutesDictionary)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00254}00254         \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00255}00255             \textcolor{keywordflow}{foreach} (var vehicle \textcolor{keywordflow}{in} orderedCapcitatedVehicles.Concat(tractors))}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00256}00256             \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00257}00257                 \textcolor{keywordflow}{if} (!vehiclesRoutesDictionary.ContainsKey(vehicle))}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00258}00258                 \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00259}00259                     vehiclesRoutesDictionary.Add(vehicle, \textcolor{keyword}{new} VehicleSchedule(vehicle, MaxDelayWithinRoute, MaxVehicleDelay));}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00260}00260                 \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00261}00261             \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00262}00262         \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00263}00263 }
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00264}00264         \textcolor{keyword}{private} List<Route> TraverseEdgesAndCreateBasicSolution(RouteGenerator routeGenerator, IOrderedEnumerable<Vehicle> orderedCapcitatedVehicles, IEnumerable<Vehicle> tractors, List<Edge> orderedEdges, List<Route> routes, List<TransportRequest> unassignedRequests, Dictionary<TransportRequest, Route> requestsRoutesDictionary, Dictionary<Vehicle, VehicleSchedule> vehiclesRoutesDictionary, Dictionary<Route, ISet<Route>> subsequentRoutes)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00265}00265         \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00266}00266             \textcolor{keywordflow}{foreach} (var edge \textcolor{keywordflow}{in} orderedEdges)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00267}00267             \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00268}00268                 \textcolor{keywordflow}{if} (!requestsRoutesDictionary.ContainsKey(edge.FirstRequest) \&\&}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00269}00269                     !requestsRoutesDictionary.ContainsKey(edge.SecondRequest))}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00270}00270                 \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00271}00271                     TryCreateRouteForTwoSingleRequests(}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00272}00272                         edge.FirstRequest,}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00273}00273                         edge.SecondRequest,}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00274}00274                         orderedCapcitatedVehicles,}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00275}00275                         tractors.OrderByDescending(tr => vehiclesRoutesDictionary[tr].Routes.Count).ToList(),}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00276}00276                         routeGenerator,}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00277}00277                         routes,}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00278}00278                         unassignedRequests,}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00279}00279                         requestsRoutesDictionary,}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00280}00280                         vehiclesRoutesDictionary,}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00281}00281                         subsequentRoutes);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00282}00282                 \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00283}00283                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!requestsRoutesDictionary.ContainsKey(edge.FirstRequest))}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00284}00284                 \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00285}00285                     \textcolor{keywordtype}{int} defaultInsertionPoint = -\/1;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00286}00286                     \mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_aae1d999843ee79c6abaea9828f4ec80cad7f5ad10c24d1351cc898e4656e631fa}{TransportRequest}} consideredRequest = edge.FirstRequest;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00287}00287                     \mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_aae1d999843ee79c6abaea9828f4ec80ca9405c3aff9112c3c60d03b94792877dc}{Route}} route = requestsRoutesDictionary[edge.SecondRequest];}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00288}00288                     \textcolor{keywordflow}{if} (route.UnloadedRequests[1].Contains(edge.SecondRequest) || route.LoadedRequests[1].Contains(edge.SecondRequest))}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00289}00289                     \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00290}00290                         defaultInsertionPoint = 1;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00291}00291                     \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00292}00292                     TryAddSinglePointToExistingRoute(route, consideredRequest, defaultInsertionPoint, routeGenerator, routes, unassignedRequests, requestsRoutesDictionary, vehiclesRoutesDictionary, subsequentRoutes);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00293}00293                 \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00294}00294                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!requestsRoutesDictionary.ContainsKey(edge.SecondRequest))}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00295}00295                 \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00296}00296                     \textcolor{keywordtype}{int} defaultInsertionPoint = -\/1;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00297}00297                     \mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_aae1d999843ee79c6abaea9828f4ec80cad7f5ad10c24d1351cc898e4656e631fa}{TransportRequest}} consideredRequest = edge.SecondRequest;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00298}00298                     \mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_aae1d999843ee79c6abaea9828f4ec80ca9405c3aff9112c3c60d03b94792877dc}{Route}} route = requestsRoutesDictionary[edge.FirstRequest];}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00299}00299                     \textcolor{keywordflow}{if} (route.UnloadedRequests[\string^2].Contains(edge.FirstRequest) || route.LoadedRequests[\string^2].Contains(edge.FirstRequest))}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00300}00300                     \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00301}00301                         defaultInsertionPoint = route.VisitedLocations.Count -\/ 1;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00302}00302                         \textcolor{keywordflow}{if} (edge.Weight == 0)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00303}00303                         \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00304}00304                             defaultInsertionPoint = route.VisitedLocations.Count -\/ 2;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00305}00305                         \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00306}00306                     \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00307}00307                     TryAddSinglePointToExistingRoute(route, consideredRequest, defaultInsertionPoint, routeGenerator, routes, unassignedRequests, requestsRoutesDictionary, vehiclesRoutesDictionary, subsequentRoutes);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00308}00308                 \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00309}00309                 \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00310}00310                 \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00311}00311                     var route1 = requestsRoutesDictionary[edge.FirstRequest];}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00312}00312                     var route2 = requestsRoutesDictionary[edge.SecondRequest];}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00313}00313                     \textcolor{keywordflow}{if} (route1 != route2)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00314}00314                     \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00315}00315                         route1.CheckOverlapAndCapacity(routes);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00316}00316                         route2.CheckOverlapAndCapacity(routes);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00317}00317                         TryMergeRoutes(route1, route2, edge.FirstRequest, edge.SecondRequest, routeGenerator, routes, requestsRoutesDictionary, vehiclesRoutesDictionary, subsequentRoutes);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00318}00318                     \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00319}00319                 \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00320}00320             \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00321}00321             \textcolor{keywordflow}{return} routes;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00322}00322         \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00323}00323 }
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00324}00324         \textcolor{keyword}{private} \textcolor{keywordtype}{void} TryCreateRouteForRequests(}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00325}00325             RouteGenerator routeGenerator,}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00326}00326             List<Route> routes,}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00327}00327             List<TransportRequest> unassignedRequests,}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00328}00328             Dictionary<TransportRequest, Route> requestsRoutesDictionary,}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00329}00329             Dictionary<Vehicle, VehicleSchedule> vehiclesRoutesDictionary,}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00330}00330             List<TransportRequest> requestSet,}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00331}00331             List<Vehicle> selectedVehicles,}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00332}00332             List<Vehicle> selectedTractors,}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00333}00333             Dictionary<Route, ISet<Route>> subsequentRoutes)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00334}00334         \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00335}00335             \textcolor{keywordflow}{while} (selectedVehicles.Any())}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00336}00336             \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00337}00337                 \textcolor{keywordtype}{int} index;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00338}00338                 \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_cluster_1_1_generalized_clustering_1_1_clusterizing_v_r_p_optimizer_a65d0d493c5902c399f40e19f78a08f72}{RandomizeVehicleChoice}})}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00339}00339                 \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00340}00340                     index = rng.Next(selectedVehicles.Count);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00341}00341                 \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00342}00342                 \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00343}00343                 \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00344}00344                     index = 0;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00345}00345                 \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00346}00346                 \mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_aae1d999843ee79c6abaea9828f4ec80cad6af9c1eaff2a89ebd3f8d0c542be12b}{Vehicle}} selectedVehicle = selectedVehicles[index];}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00347}00347                 \mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_aae1d999843ee79c6abaea9828f4ec80ca9405c3aff9112c3c60d03b94792877dc}{Route}} route = routeGenerator.CreateRoute(selectedVehicle, \textcolor{keyword}{null}, \textcolor{keyword}{null});}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00348}00348                 \textcolor{keywordtype}{bool} success = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00349}00349                 \textcolor{keywordflow}{foreach} (var request \textcolor{keywordflow}{in} requestSet)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00350}00350                 \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00351}00351                     var result = route.FindBestInsertionForRequest(request);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00352}00352                     \textcolor{keywordflow}{if} (result.Success)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00353}00353                     \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00354}00354                         route.Insert(result.InsertionIndex, request);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00355}00355                     \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00356}00356                     \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00357}00357                     \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00358}00358                         success = \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00359}00359                     \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00360}00360                 \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00361}00361                 \textcolor{keywordflow}{if} (!success || !vehiclesRoutesDictionary[selectedVehicle].RouteFitsIntoSchedule(route, vehiclesRoutesDictionary, subsequentRoutes))}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00362}00362                 \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00363}00363                     selectedVehicles.Remove(selectedVehicle);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00364}00364                     \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00365}00365                 \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00366}00366                 \textcolor{keywordflow}{if} (selectedVehicle.Type == \mbox{\hyperlink{namespace_common_g_i_s}{CommonGIS}}.\mbox{\hyperlink{namespace_common_g_i_s_1_1_enums}{Enums}}.VehicleType.SemiTrailer)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00367}00367                 \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00368}00368                     \textcolor{keywordflow}{while} (selectedTractors.Any())}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00369}00369                     \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00370}00370                         \textcolor{keywordtype}{int} tractorIndex;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00371}00371                         \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_cluster_1_1_generalized_clustering_1_1_clusterizing_v_r_p_optimizer_a65d0d493c5902c399f40e19f78a08f72}{RandomizeVehicleChoice}})}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00372}00372                         \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00373}00373                             tractorIndex = rng.Next(selectedTractors.Count);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00374}00374                         \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00375}00375                         \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00376}00376                         \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00377}00377                             tractorIndex = 0;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00378}00378                         \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00379}00379                         \mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_aae1d999843ee79c6abaea9828f4ec80cad6af9c1eaff2a89ebd3f8d0c542be12b}{Vehicle}} selectedTractor = selectedTractors[tractorIndex];}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00380}00380                         route = routeGenerator.CreateRoute(selectedVehicle, selectedTractor, \textcolor{keyword}{null});}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00381}00381                         \textcolor{keywordflow}{foreach} (var request \textcolor{keywordflow}{in} requestSet)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00382}00382                         \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00383}00383                             var result = route.FindBestInsertionForRequest(request);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00384}00384                             \textcolor{keywordflow}{if} (result.Success)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00385}00385                             \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00386}00386                                 route.Insert(result.InsertionIndex, request);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00387}00387                             \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00388}00388                             \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00389}00389                             \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00390}00390                                 success = \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00391}00391                                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00392}00392                             \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00393}00393                         \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00394}00394                         \textcolor{keywordflow}{if} (!success || !vehiclesRoutesDictionary[selectedVehicle].RouteFitsIntoSchedule(route, vehiclesRoutesDictionary, subsequentRoutes))}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00395}00395                         \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00396}00396                             selectedTractors.Remove(selectedTractor);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00397}00397                             \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00398}00398                         \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00399}00399                         \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00400}00400                         \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00401}00401                             \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00402}00402                         \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00403}00403                     \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00404}00404                     \textcolor{keywordflow}{if} (!selectedTractors.Any())}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00405}00405                     \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00406}00406                         selectedVehicles.Remove(selectedVehicle);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00407}00407                         \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00408}00408                     \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00409}00409                 \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00410}00410 }
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00411}00411                 \textcolor{keywordflow}{foreach} (var request \textcolor{keywordflow}{in} requestSet)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00412}00412                 \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00413}00413                     unassignedRequests.Remove(request);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00414}00414                     requestsRoutesDictionary.Remove(request);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00415}00415                     requestsRoutesDictionary.Add(request, route);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00416}00416                 \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00417}00417                 route.SchedulesAddTo(vehiclesRoutesDictionary, routes, subsequentRoutes);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00418}00418                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00419}00419             \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00420}00420         \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00421}00421 }
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00422}00422         \textcolor{keyword}{private} \mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_aae1d999843ee79c6abaea9828f4ec80ca9405c3aff9112c3c60d03b94792877dc}{Route}} TryCreateRouteForRequestsSet(RouteGenerator routeGenerator, Route route1, Route route2, List<TransportRequest> requestsSetKeys)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00423}00423         \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00424}00424             \mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_aae1d999843ee79c6abaea9828f4ec80ca9405c3aff9112c3c60d03b94792877dc}{Route}} newRoute = \textcolor{keyword}{null};}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00425}00425             \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_cluster_1_1_generalized_clustering_1_1_clusterizing_v_r_p_optimizer_a65d0d493c5902c399f40e19f78a08f72}{RandomizeVehicleChoice}} \&\& route1.Vehicle.CanFitRequests(requestsSetKeys) \&\& route2.Vehicle.CanFitRequests(requestsSetKeys))}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00426}00426             \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00427}00427                 \textcolor{keywordflow}{if} (rng.Next(2) > 0)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00428}00428                 \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00429}00429                     newRoute = routeGenerator.CreateRoute(route1.Vehicle, route1.VehicleTractor, route1.VehicleDriver);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00430}00430                 \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00431}00431                 \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00432}00432                 \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00433}00433                     newRoute = routeGenerator.CreateRoute(route2.Vehicle, route2.VehicleTractor, route2.VehicleDriver);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00434}00434                 \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00435}00435             \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00436}00436             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (route1.Vehicle.CanFitRequests(requestsSetKeys)\textcolor{comment}{/* \&\& vehiclesRoutesDictionary[route1.Vehicle].Count <= 1*/})}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00437}00437             \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00438}00438                 newRoute = routeGenerator.CreateRoute(route1.Vehicle, route1.VehicleTractor, route1.VehicleDriver);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00439}00439             \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00440}00440             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (route2.Vehicle.CanFitRequests(requestsSetKeys)\textcolor{comment}{/* \&\& vehiclesRoutesDictionary[route2.Vehicle].Count <= 1*/})}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00441}00441             \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00442}00442                 newRoute = routeGenerator.CreateRoute(route2.Vehicle, route2.VehicleTractor, route2.VehicleDriver);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00443}00443             \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00444}00444 }
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00445}00445             \textcolor{keywordflow}{return} newRoute;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00446}00446         \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00447}00447 }
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00448}00448         \textcolor{keyword}{private} \textcolor{keywordtype}{void} TryCreateRouteForTwoSingleRequests(TransportRequest firstRequest, TransportRequest secondRequest, IOrderedEnumerable<Vehicle> orderedCapcitatedVehicles, List<Vehicle> orderedTractors, RouteGenerator routeGenerator, List<Route> routes, List<TransportRequest> unassignedRequests, Dictionary<TransportRequest, Route> requestsRoutesDictionary, Dictionary<Vehicle, VehicleSchedule> vehiclesRoutesDictionary, Dictionary<Route, ISet<Route>> subsequentRoutes)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00449}00449         \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00450}00450             var requestSet = \textcolor{keyword}{new} List<TransportRequest>(\textcolor{keyword}{new} TransportRequest[] \{ firstRequest, secondRequest \});}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00451}00451             var selectedVehicles = orderedCapcitatedVehicles.Where(v => v.CanFitRequests(requestSet)).ToList();}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00452}00452             selectedVehicles.Reverse();}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00453}00453             TryCreateRouteForRequests(routeGenerator, routes, unassignedRequests, requestsRoutesDictionary, vehiclesRoutesDictionary, requestSet, selectedVehicles, orderedTractors, subsequentRoutes);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00454}00454         \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00455}00455 }
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00456}00456         \textcolor{keyword}{private} \textcolor{keywordtype}{void} TryMergeRoutes(Route route1, Route route2, TransportRequest firstRouteClosestToSecondRoute, TransportRequest secondRouteClosestToFirstRoute, RouteGenerator routeGenerator, List<Route> routes, Dictionary<TransportRequest, Route> requestsRoutesDictionary, Dictionary<Vehicle, VehicleSchedule> vehiclesRoutesDictionary, Dictionary<Route, ISet<Route>> subsequentRoutes)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00457}00457         \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00458}00458             var requestsSet = \textcolor{keyword}{new} Dictionary<TransportRequest, int>();}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00459}00459             \textcolor{keywordtype}{int} offset = 1;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00460}00460             offset = FillInRequestsSetFromRoute(route1, requestsSet, offset);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00461}00461             offset = FillInRequestsSetFromRoute(route2, requestsSet, offset);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00462}00462             List<TransportRequest> requestsSetKeys = requestsSet.Keys.ToList();}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00463}00463             \mbox{\hyperlink{namespace_v_r_p_t_w_optimizer_1_1_utils_1_1_validation_aae1d999843ee79c6abaea9828f4ec80ca9405c3aff9112c3c60d03b94792877dc}{Route}} newRoute = TryCreateRouteForRequestsSet(routeGenerator, route1, route2, requestsSetKeys);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00464}00464             \textcolor{keywordflow}{if} (newRoute != \textcolor{keyword}{null})}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00465}00465             \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00466}00466                 \textcolor{keywordflow}{if} ((route1.LoadedRequests[\string^2].Contains(firstRouteClosestToSecondRoute) || route1.UnloadedRequests[\string^2].Contains(firstRouteClosestToSecondRoute))}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00467}00467                     \&\& (route2.LoadedRequests[1].Contains(secondRouteClosestToFirstRoute) || route1.UnloadedRequests[1].Contains(secondRouteClosestToFirstRoute)))}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00468}00468                 \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00469}00469                     \textcolor{keywordflow}{if} (!MergeRequestSetIntoRouteSubsequently(requestsSet, requestsSetKeys, newRoute))}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00470}00470                     \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00471}00471                         \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00472}00472                     \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00473}00473                 \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00474}00474                 \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00475}00475                 \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00476}00476                     \textcolor{keywordflow}{if} (!IdentifyMainRouteAndMergeSecondRouteRequestsIntoIt(route1, route2, newRoute))}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00477}00477                     \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00478}00478                         \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00479}00479                     \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00480}00480                 \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00481}00481                 route1.SchedulesRemoveFrom(vehiclesRoutesDictionary, routes, subsequentRoutes);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00482}00482                 route2.SchedulesRemoveFrom(vehiclesRoutesDictionary, routes, subsequentRoutes);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00483}00483                 \textcolor{keywordflow}{if} (!vehiclesRoutesDictionary[newRoute.Vehicle].RouteFitsIntoSchedule(newRoute, vehiclesRoutesDictionary, subsequentRoutes))}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00484}00484                 \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00485}00485                     route1.SchedulesAddTo(vehiclesRoutesDictionary, routes, subsequentRoutes);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00486}00486                     route2.SchedulesAddTo(vehiclesRoutesDictionary, routes, subsequentRoutes);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00487}00487                     \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00488}00488                 \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00489}00489                 newRoute.SchedulesAddTo(vehiclesRoutesDictionary, routes, subsequentRoutes);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00490}00490                 \textcolor{keywordflow}{foreach} (var transportRequest \textcolor{keywordflow}{in} requestsSetKeys)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00491}00491                 \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00492}00492                     requestsRoutesDictionary[transportRequest] = newRoute;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00493}00493                 \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00494}00494             \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00495}00495         \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00496}00496 }
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00497}\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_cluster_1_1_generalized_clustering_1_1_clusterizing_v_r_p_optimizer_ac1b02c1864d7821bf83022bd6c86cfb8}{00497}}         \textcolor{keyword}{public} \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_v_r_p_optimizer_result}{VRPOptimizerResult}} \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_cluster_1_1_generalized_clustering_1_1_clusterizing_v_r_p_optimizer_ac1b02c1864d7821bf83022bd6c86cfb8}{Optimize}}(\mbox{\hyperlink{interface_v_r_p_t_w_optimizer_1_1_interfaces_1_1_i_v_r_p_provider}{IVRPProvider}} vrpProvider, \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_v_r_p_cost_function}{VRPCostFunction}} costFunctionFactors, \mbox{\hyperlink{interface_v_r_p_t_w_optimizer_1_1_interfaces_1_1_i_time_estimator}{ITimeEstimator}} timeEstimator, \mbox{\hyperlink{interface_common_g_i_s_1_1_interfaces_1_1_i_distance_provider}{IDistanceProvider}} distanceProvider)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00498}00498         \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00499}00499             \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_generator}{RouteGenerator}} routeGenerator = \textcolor{keyword}{new} \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_route_generator}{RouteGenerator}}(distanceProvider, timeEstimator);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00500}00500             List<TransportRequest> requests = vrpProvider.\mbox{\hyperlink{interface_v_r_p_t_w_optimizer_1_1_interfaces_1_1_i_v_r_p_provider_af8d49aa28e8758bf0aa710d8e295fdb2}{Requests}}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00501}00501                 .Where(rq => rq.DeliveryLocation.Id == vrpProvider.\mbox{\hyperlink{interface_v_r_p_t_w_optimizer_1_1_interfaces_1_1_i_v_r_p_provider_a2d19009b7dd660f4e205890a57f81aed}{HomeDepot}}.\mbox{\hyperlink{class_common_g_i_s_1_1_location_aa6d57fbce06f9491a85aac4e0ac69870}{Id}} ||}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00502}00502                 rq.PickupLocation.Id == vrpProvider.\mbox{\hyperlink{interface_v_r_p_t_w_optimizer_1_1_interfaces_1_1_i_v_r_p_provider_a2d19009b7dd660f4e205890a57f81aed}{HomeDepot}}.\mbox{\hyperlink{class_common_g_i_s_1_1_location_aa6d57fbce06f9491a85aac4e0ac69870}{Id}} || !FilterOutTransferRequests)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00503}00503                 .ToList();}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00504}00504             List<Vehicle> vehicles = vrpProvider.\mbox{\hyperlink{interface_v_r_p_t_w_optimizer_1_1_interfaces_1_1_i_v_r_p_provider_a4199547318344b5c4f5cf5cfc2765fa1}{Vehicles}};}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00505}00505             \mbox{\hyperlink{class_common_g_i_s_1_1_location}{Location}} homeDepot = vrpProvider.\mbox{\hyperlink{interface_v_r_p_t_w_optimizer_1_1_interfaces_1_1_i_v_r_p_provider_a2d19009b7dd660f4e205890a57f81aed}{HomeDepot}};}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00506}00506             var orderedCapcitatedVehicles = vehicles}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00507}00507               .Where(vh => vh.Type != \mbox{\hyperlink{namespace_common_g_i_s}{CommonGIS}}.\mbox{\hyperlink{namespace_common_g_i_s_1_1_enums}{Enums}}.VehicleType.Tractor)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00508}00508               .OrderBy(vh => vh.RoadProperties.GrossVehicleWeight);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00509}00509             var tractors = vehicles}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00510}00510                 .Where(vh => vh.Type == \mbox{\hyperlink{namespace_common_g_i_s}{CommonGIS}}.\mbox{\hyperlink{namespace_common_g_i_s_1_1_enums}{Enums}}.VehicleType.Tractor);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00511}00511             var maxVehicleRoadProperties = orderedCapcitatedVehicles.Last().RoadProperties;}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00512}00512             List<Edge> orderedEdges = \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_edge}{Edge}}.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_edge_ae589d0ce8d4e4d5cbc73212f5bb74ab0}{CreateEdgesBetweenVariousNodes}}(}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00513}00513                 requests,}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00514}00514                 vehicles,}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00515}00515                 vrpProvider.\mbox{\hyperlink{interface_v_r_p_t_w_optimizer_1_1_interfaces_1_1_i_v_r_p_provider_a2d19009b7dd660f4e205890a57f81aed}{HomeDepot}}.\mbox{\hyperlink{class_common_g_i_s_1_1_location_aa6d57fbce06f9491a85aac4e0ac69870}{Id}},}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00516}00516                 distanceProvider,}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00517}00517                 timeEstimator,}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00518}00518                 maxVehicleRoadProperties,}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00519}00519                 MaxDelayWithinRoute,}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00520}00520                 costFunctionFactors);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00521}00521 }
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00522}00522             var routes = \textcolor{keyword}{new} List<Route>();}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00523}00523             var unassignedRequests = \textcolor{keyword}{new} List<TransportRequest>();}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00524}00524             unassignedRequests.AddRange(requests);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00525}00525             var requestsRoutesDictionary = \textcolor{keyword}{new} Dictionary<TransportRequest, Route>();}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00526}00526             var vehiclesRoutesDictionary = \textcolor{keyword}{new} Dictionary<Vehicle, VehicleSchedule>();}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00527}00527             var subsequentRoutes = \textcolor{keyword}{new} Dictionary<Route, ISet<Route>>();}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00528}00528 }
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00529}00529             IntializeVehicleRoutesDictionary(orderedCapcitatedVehicles, tractors, vehiclesRoutesDictionary);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00530}00530 }
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00531}00531             routes = CreateSeedRoutesForRequestsExceedingHalfCapacity(routeGenerator, requests, orderedCapcitatedVehicles, tractors, routes, unassignedRequests, requestsRoutesDictionary, vehiclesRoutesDictionary, vrpProvider.\mbox{\hyperlink{interface_v_r_p_t_w_optimizer_1_1_interfaces_1_1_i_v_r_p_provider_a2d19009b7dd660f4e205890a57f81aed}{HomeDepot}}.\mbox{\hyperlink{class_common_g_i_s_1_1_location_aa6d57fbce06f9491a85aac4e0ac69870}{Id}}, subsequentRoutes);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00532}00532             routes.ForEach(rt => rt.CheckOverlapAndCapacity(routes));}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00533}00533             routes = TraverseEdgesAndCreateBasicSolution(routeGenerator, orderedCapcitatedVehicles, tractors, orderedEdges, routes, unassignedRequests, requestsRoutesDictionary, vehiclesRoutesDictionary, subsequentRoutes);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00534}00534             routes.ForEach(rt => rt.CheckOverlapAndCapacity(routes));}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00535}00535             var finallyUnassignedRequests = FitInUnassignedRequestsIntoExistingSolution(routeGenerator, orderedCapcitatedVehicles, tractors, routes, unassignedRequests, requestsRoutesDictionary, vehiclesRoutesDictionary, subsequentRoutes);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00536}00536 }
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00537}00537             List<TransportRequest> transferRequests = vrpProvider.\mbox{\hyperlink{interface_v_r_p_t_w_optimizer_1_1_interfaces_1_1_i_v_r_p_provider_af8d49aa28e8758bf0aa710d8e295fdb2}{Requests}}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00538}00538                 .Where(rq => rq.DeliveryLocation.Id != vrpProvider.\mbox{\hyperlink{interface_v_r_p_t_w_optimizer_1_1_interfaces_1_1_i_v_r_p_provider_a2d19009b7dd660f4e205890a57f81aed}{HomeDepot}}.\mbox{\hyperlink{class_common_g_i_s_1_1_location_aa6d57fbce06f9491a85aac4e0ac69870}{Id}} \&\&}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00539}00539                 rq.PickupLocation.Id != vrpProvider.\mbox{\hyperlink{interface_v_r_p_t_w_optimizer_1_1_interfaces_1_1_i_v_r_p_provider_a2d19009b7dd660f4e205890a57f81aed}{HomeDepot}}.\mbox{\hyperlink{class_common_g_i_s_1_1_location_aa6d57fbce06f9491a85aac4e0ac69870}{Id}})}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00540}00540                 .ToList();}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00541}00541             finallyUnassignedRequests = finallyUnassignedRequests.Concat(transferRequests).ToList();}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00542}00542 }
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00543}00543             routes.ForEach(rt => rt.CheckOverlapAndCapacity(routes));}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00544}00544 }
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00545}00545             \textcolor{comment}{//TODO this does not account for transfers}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00546}00546             IEnumerable<TransportRequest> requestsInRoutesAndUnassigned = routes}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00547}00547                 .SelectMany(rt => rt.LoadedRequests[0])}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00548}00548                 .Concat(routes.SelectMany(rt => rt.UnloadedRequests[\string^1]))}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00549}00549                 .Concat(finallyUnassignedRequests);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00550}00550 }
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00551}00551             Debug.Assert(requests.All(rq => requestsInRoutesAndUnassigned.Contains(rq)));}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00552}00552             Debug.Assert(requests.All(rq => requestsInRoutesAndUnassigned.Count(rq2 => rq == rq2) == 1));}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00553}00553             \textcolor{keywordflow}{return} \textcolor{keyword}{new}() \{ LeftRequests = finallyUnassignedRequests, Routes = routes.Select(rt => rt as \mbox{\hyperlink{interface_v_r_p_t_w_optimizer_1_1_interfaces_1_1_i_route}{IRoute}}).ToList() \};}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00554}00554         \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00555}00555 }
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00556}\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_cluster_1_1_generalized_clustering_1_1_clusterizing_v_r_p_optimizer_a1e2e57220a19a273a738a2ef77508278}{00556}}         \textcolor{keyword}{public} \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_v_r_p_optimizer_result}{VRPOptimizerResult}} \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_cluster_1_1_generalized_clustering_1_1_clusterizing_v_r_p_optimizer_a1e2e57220a19a273a738a2ef77508278}{Optimize}}(\mbox{\hyperlink{interface_v_r_p_t_w_optimizer_1_1_interfaces_1_1_i_v_r_p_provider}{IVRPProvider}} vrpProvider, \mbox{\hyperlink{interface_v_r_p_t_w_optimizer_1_1_interfaces_1_1_i_time_estimator}{ITimeEstimator}} timeEstimator, \mbox{\hyperlink{interface_common_g_i_s_1_1_interfaces_1_1_i_distance_provider}{IDistanceProvider}} distanceProvider)}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00557}00557         \{}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00558}00558             \textcolor{keywordflow}{return} \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_b_l_1_1_meta_1_1_cluster_1_1_generalized_clustering_1_1_clusterizing_v_r_p_optimizer_ac1b02c1864d7821bf83022bd6c86cfb8}{Optimize}}(vrpProvider, \mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_v_r_p_cost_function}{VRPCostFunction}}.\mbox{\hyperlink{class_v_r_p_t_w_optimizer_1_1_v_r_p_cost_function_a79565414d578890a651795ea4404ed5c}{GetDefaultParametersFunction}}(), timeEstimator, distanceProvider);}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00559}00559         \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00560}00560     \}}
\DoxyCodeLine{\Hypertarget{_generalized_clustering_2_clusterizing_v_r_p_optimizer_8cs_source_l00561}00561 \}}

\end{DoxyCode}
